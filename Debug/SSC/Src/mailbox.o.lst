   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "mailbox.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .section .text.HW_EscRead,"ax",%progbits
  20              	 .align 2
  21              	 .thumb
  22              	 .thumb_func
  24              	HW_EscRead:
  25              	.LFB167:
  26              	 .file 1 "D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC/xmc_eschw.h"
   1:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
   2:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @file xmc_eschw.h
   3:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @date 2018-01-24
   4:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
   5:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * NOTE:
   6:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * This file is copied by DAVE. Any manual modification done to this file will be lost when the cod
   7:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
   8:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @cond
   9:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  **************************************************************************************************
  10:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * ECAT_SSC v4.0.26 - ECAT_SSC APP initializes the XMC ESC and sets up the interface for Beckhoff E
  11:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  12:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Copyright (c) 2016-2019, Infineon Technologies AG
  13:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * All rights reserved.
  14:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  15:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Redistribution and use in source and binary forms, with or without modification,are permitted pr
  16:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * following conditions are met:
  17:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  18:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   Redistributions of source code must retain the above copyright notice, this list of conditions
  19:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   disclaimer.
  20:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  21:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   Redistributions in binary form must reproduce the above copyright notice, this list of conditi
  22:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   disclaimer in the documentation and/or other materials provided with the distribution.
  23:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  24:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   Neither the name of the copyright holders nor the names of its contributors may be used to end
  25:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *   products derived from this software without specific prior written permission.
  26:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  27:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR I
  28:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTI
  29:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE  FOR ANY DIRECT, IN
  30:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBS
  31:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THE
  32:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * WHETHER IN CONTRACT, STRICT LIABILITY,OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
  33:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  34:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  35:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * To improve the quality of the software, users are encouraged to share modifications, enhancement
  36:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * with Infineon Technologies AG (dave@infineon.com).
  37:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  **************************************************************************************************
  38:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  39:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Change History
  40:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * --------------
  41:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  42:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * 2016-02-05:
  43:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *     - Initial version
  44:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  45:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * 2018-01-24:
  46:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *     - Added HW_ClearTimer()
  47:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  48:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @endcond
  49:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
  50:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
  51:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  52:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #ifndef XMC_ESCHW_H
  53:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define XMC_ESCHW_H
  54:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  55:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**************************************************************************************************
  56:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * HEADER FILES
  57:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  **************************************************************************************************
  58:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #include "SSC/Src/esc.h"
  59:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #include "xmc_ecat.h"
  60:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #include "E_EEPROM_XMC4/e_eeprom_xmc4.h"
  61:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  62:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  /*************************************************************************************************
  63:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   * MACROS
  64:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   *************************************************************************************************
  65:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  66:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define ECAT_TIMER_INC_P_MS (1U) /**< Timer increment value */
  67:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  68:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define pEsc ((uint8_t *)ECAT0)  /**< EtherCAT module address */
  69:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  70:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** extern uint8_t aEepromData[];
  71:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  72:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**************************************************************************************************
  73:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * API Prototypes
  74:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  **************************************************************************************************
  75:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  76:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #ifdef __cplusplus
  77:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** extern "C" {
  78:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #endif
  79:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  80:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
  81:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @ingroup ECAT_SSC_apidoc
  82:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @{
  83:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
  84:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  85:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadDWord(DWordValue, Address)     ((DWordValue) = (UINT32)(((volatile UINT32 *)pEsc)
  86:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  87:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadDWordIsr(DWordValue, Address)  HW_EscReadDWord(DWordValue, Address)              
  88:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  89:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadWord(WordValue, Address)       ((WordValue) = (((volatile UINT16 *)pEsc)[((Addres
  90:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  91:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadWordIsr(WordValue, Address)    HW_EscReadWord(WordValue, Address)                
  92:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  93:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadByte(ByteValue, Address)       ((ByteValue) = (((volatile UINT8 *)pEsc)[(Address)
  94:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  95:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscReadByteIsr(ByteValue, Address)    HW_EscReadByte(ByteValue, Address)                
  96:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  97:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteDWord(DWordValue, Address)    ((((volatile UINT32 *)pEsc)[(Address>>2)]) = (DWor
  98:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
  99:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteDWordIsr(DWordValue, Address) HW_EscWriteWord(DWordValue, Address)              
 100:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 101:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteWord(WordValue, Address)      ((((volatile UINT16 *)pEsc)[((Address)>>1)]) = (Wo
 102:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 103:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteWordIsr(WordValue, Address)   HW_EscWriteWord(WordValue, Address)               
 104:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 105:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteByte(ByteValue, Address)      ((((volatile UINT8 *)pEsc)[(Address)]) = (ByteValu
 106:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 107:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** #define HW_EscWriteByteIsr(ByteValue, Address)   HW_EscWriteByte(ByteValue, Address)               
 108:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 109:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 110:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief 16Bit ESC read access
 111:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 112:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local destination buffer.
 113:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 114:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 115:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 116:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 117:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 118:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 119:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 120:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Reads from the EtherCAT Slave Controller. This function is used to access ESC registers and the 
 121:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 122:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 123:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscRead(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 124:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
  27              	 .loc 1 124 0
  28              	 .cfi_startproc
  29              	 
  30              	 
  31 0000 80B5     	 push {r7,lr}
  32              	.LCFI0:
  33              	 .cfi_def_cfa_offset 8
  34              	 .cfi_offset 7,-8
  35              	 .cfi_offset 14,-4
  36 0002 82B0     	 sub sp,sp,#8
  37              	.LCFI1:
  38              	 .cfi_def_cfa_offset 16
  39 0004 00AF     	 add r7,sp,#0
  40              	.LCFI2:
  41              	 .cfi_def_cfa_register 7
  42 0006 7860     	 str r0,[r7,#4]
  43 0008 0B46     	 mov r3,r1
  44 000a 7B80     	 strh r3,[r7,#2]
  45 000c 1346     	 mov r3,r2
  46 000e 3B80     	 strh r3,[r7]
 125:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   memcpy(pData, &pEsc[Address], Len);
  47              	 .loc 1 125 0
  48 0010 7B88     	 ldrh r3,[r7,#2]
  49 0012 03F1A843 	 add r3,r3,#1409286144
  50 0016 03F58033 	 add r3,r3,#65536
  51 001a 3A88     	 ldrh r2,[r7]
  52 001c 7868     	 ldr r0,[r7,#4]
  53 001e 1946     	 mov r1,r3
  54 0020 FFF7FEFF 	 bl memcpy
 126:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
  55              	 .loc 1 126 0
  56 0024 0837     	 adds r7,r7,#8
  57              	.LCFI3:
  58              	 .cfi_def_cfa_offset 8
  59 0026 BD46     	 mov sp,r7
  60              	.LCFI4:
  61              	 .cfi_def_cfa_register 13
  62              	 
  63 0028 80BD     	 pop {r7,pc}
  64              	 .cfi_endproc
  65              	.LFE167:
  67 002a 00BF     	 .section .text.HW_EscReadMbxMem,"ax",%progbits
  68              	 .align 2
  69              	 .thumb
  70              	 .thumb_func
  72              	HW_EscReadMbxMem:
  73              	.LFB169:
 127:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 128:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 129:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief Interrupt specific 16Bit ESC read access
 130:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 131:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local destination buffer.
 132:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 133:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 134:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 135:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 136:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 137:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 138:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 139:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Reads from the EtherCAT Slave Controller. This function is used to access ESC registers and the 
 140:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 141:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 142:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscReadIsr(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 143:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
 144:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   HW_EscRead(pData, Address, Len);
 145:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
 146:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 147:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 148:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief Reads data from the ESC and copies to slave mailbox memory.
 149:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 150:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local destination buffer.
 151:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 152:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 153:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 154:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 155:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 156:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 157:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 158:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Reads data from the ESC and copies to slave mailbox memory. If the local mailbox memory is also 
 159:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * application memory this function is equal to HW_EscRead.
 160:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 161:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 162:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscReadMbxMem(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 163:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
  74              	 .loc 1 163 0
  75              	 .cfi_startproc
  76              	 
  77              	 
  78 0000 80B5     	 push {r7,lr}
  79              	.LCFI5:
  80              	 .cfi_def_cfa_offset 8
  81              	 .cfi_offset 7,-8
  82              	 .cfi_offset 14,-4
  83 0002 82B0     	 sub sp,sp,#8
  84              	.LCFI6:
  85              	 .cfi_def_cfa_offset 16
  86 0004 00AF     	 add r7,sp,#0
  87              	.LCFI7:
  88              	 .cfi_def_cfa_register 7
  89 0006 7860     	 str r0,[r7,#4]
  90 0008 0B46     	 mov r3,r1
  91 000a 7B80     	 strh r3,[r7,#2]
  92 000c 1346     	 mov r3,r2
  93 000e 3B80     	 strh r3,[r7]
 164:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   HW_EscRead(pData, Address, Len);
  94              	 .loc 1 164 0
  95 0010 7A88     	 ldrh r2,[r7,#2]
  96 0012 3B88     	 ldrh r3,[r7]
  97 0014 7868     	 ldr r0,[r7,#4]
  98 0016 1146     	 mov r1,r2
  99 0018 1A46     	 mov r2,r3
 100 001a FFF7FEFF 	 bl HW_EscRead
 165:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
 101              	 .loc 1 165 0
 102 001e 0837     	 adds r7,r7,#8
 103              	.LCFI8:
 104              	 .cfi_def_cfa_offset 8
 105 0020 BD46     	 mov sp,r7
 106              	.LCFI9:
 107              	 .cfi_def_cfa_register 13
 108              	 
 109 0022 80BD     	 pop {r7,pc}
 110              	 .cfi_endproc
 111              	.LFE169:
 113              	 .section .text.HW_EscWrite,"ax",%progbits
 114              	 .align 2
 115              	 .thumb
 116              	 .thumb_func
 118              	HW_EscWrite:
 119              	.LFB170:
 166:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 167:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 168:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief 16Bit ESC write access
 169:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 170:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local source buffer.
 171:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 172:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 173:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 174:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 175:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 176:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 177:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 178:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Writes from the EtherCAT Slave Controller. This function is used to access ESC registers and the
 179:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 180:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 181:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscWrite(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 182:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
 120              	 .loc 1 182 0
 121              	 .cfi_startproc
 122              	 
 123              	 
 124 0000 80B5     	 push {r7,lr}
 125              	.LCFI10:
 126              	 .cfi_def_cfa_offset 8
 127              	 .cfi_offset 7,-8
 128              	 .cfi_offset 14,-4
 129 0002 82B0     	 sub sp,sp,#8
 130              	.LCFI11:
 131              	 .cfi_def_cfa_offset 16
 132 0004 00AF     	 add r7,sp,#0
 133              	.LCFI12:
 134              	 .cfi_def_cfa_register 7
 135 0006 7860     	 str r0,[r7,#4]
 136 0008 0B46     	 mov r3,r1
 137 000a 7B80     	 strh r3,[r7,#2]
 138 000c 1346     	 mov r3,r2
 139 000e 3B80     	 strh r3,[r7]
 183:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   memcpy(&pEsc[Address], pData, Len);
 140              	 .loc 1 183 0
 141 0010 7B88     	 ldrh r3,[r7,#2]
 142 0012 03F1A843 	 add r3,r3,#1409286144
 143 0016 03F58033 	 add r3,r3,#65536
 144 001a 3A88     	 ldrh r2,[r7]
 145 001c 1846     	 mov r0,r3
 146 001e 7968     	 ldr r1,[r7,#4]
 147 0020 FFF7FEFF 	 bl memcpy
 184:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
 148              	 .loc 1 184 0
 149 0024 0837     	 adds r7,r7,#8
 150              	.LCFI13:
 151              	 .cfi_def_cfa_offset 8
 152 0026 BD46     	 mov sp,r7
 153              	.LCFI14:
 154              	 .cfi_def_cfa_register 13
 155              	 
 156 0028 80BD     	 pop {r7,pc}
 157              	 .cfi_endproc
 158              	.LFE170:
 160 002a 00BF     	 .section .text.HW_EscWriteMbxMem,"ax",%progbits
 161              	 .align 2
 162              	 .thumb
 163              	 .thumb_func
 165              	HW_EscWriteMbxMem:
 166              	.LFB172:
 185:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 186:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 187:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief Interrupt specific 16Bit ESC write access
 188:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 189:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local source buffer.
 190:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 191:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 192:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 193:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 194:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 195:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 196:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 197:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Writes from the EtherCAT Slave Controller. This function is used to access ESC registers and the
 198:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 199:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 200:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscWriteIsr(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 201:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
 202:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   HW_EscWrite(pData, Address, Len);
 203:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
 204:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** 
 205:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** /**
 206:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @brief Writes data from the slave mailbox memory to ESC memory.
 207:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 208:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param pData Pointer to local source mailbox buffer.
 209:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Address EtherCAT Slave Controller address. Specifies the offset within the ESC memory are
 210:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @param Len Access size in Bytes
 211:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 212:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * @return None
 213:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * <BR>
 214:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 215:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * \par<b>Description:</b><br>
 216:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * Writes data from the slave mailbox memory to ESC memory. If the local mailbox memory is also loc
 217:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  * application memory this function is equal to HW_EscWrite.
 218:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  *
 219:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****  */
 220:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** __STATIC_INLINE void HW_EscWriteMbxMem(MEM_ADDR *pData, UINT16 Address, UINT16 Len)
 221:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** {
 167              	 .loc 1 221 0
 168              	 .cfi_startproc
 169              	 
 170              	 
 171 0000 80B5     	 push {r7,lr}
 172              	.LCFI15:
 173              	 .cfi_def_cfa_offset 8
 174              	 .cfi_offset 7,-8
 175              	 .cfi_offset 14,-4
 176 0002 82B0     	 sub sp,sp,#8
 177              	.LCFI16:
 178              	 .cfi_def_cfa_offset 16
 179 0004 00AF     	 add r7,sp,#0
 180              	.LCFI17:
 181              	 .cfi_def_cfa_register 7
 182 0006 7860     	 str r0,[r7,#4]
 183 0008 0B46     	 mov r3,r1
 184 000a 7B80     	 strh r3,[r7,#2]
 185 000c 1346     	 mov r3,r2
 186 000e 3B80     	 strh r3,[r7]
 222:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h ****   HW_EscWrite(pData, Address, Len);
 187              	 .loc 1 222 0
 188 0010 7A88     	 ldrh r2,[r7,#2]
 189 0012 3B88     	 ldrh r3,[r7]
 190 0014 7868     	 ldr r0,[r7,#4]
 191 0016 1146     	 mov r1,r2
 192 0018 1A46     	 mov r2,r3
 193 001a FFF7FEFF 	 bl HW_EscWrite
 223:D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Dave/Generated/ECAT_SSC\xmc_eschw.h **** }
 194              	 .loc 1 223 0
 195 001e 0837     	 adds r7,r7,#8
 196              	.LCFI18:
 197              	 .cfi_def_cfa_offset 8
 198 0020 BD46     	 mov sp,r7
 199              	.LCFI19:
 200              	 .cfi_def_cfa_register 13
 201              	 
 202 0022 80BD     	 pop {r7,pc}
 203              	 .cfi_endproc
 204              	.LFE172:
 206              	 .comm bReceiveMbxIsLocked,1,1
 207              	 .comm bSendMbxIsFull,1,1
 208              	 .comm bMbxRunning,1,1
 209              	 .comm bMbxRepeatToggle,1,1
 210              	 .comm u16SendMbxSize,2,2
 211              	 .comm u16ReceiveMbxSize,2,2
 212              	 .comm u16EscAddrReceiveMbx,2,2
 213              	 .comm u16EscAddrSendMbx,2,2
 214              	 .comm u8MbxWriteCounter,1,1
 215              	 .comm u8MbxReadCounter,1,1
 216              	 .comm u8MailboxSendReqStored,1,1
 217              	 .comm psWriteMbx,4,4
 218              	 .comm psReadMbx,4,4
 219              	 .comm psRepeatMbx,4,4
 220              	 .comm psStoreMbx,4,4
 221              	 .comm sMbxSendQueue,52,4
 222              	 .comm sMbxReceiveQueue,52,4
 223              	 .comm bNoMbxMemoryAvailable,1,1
 224              	 .section .text.PutInMbxQueue,"ax",%progbits
 225              	 .align 2
 226              	 .global PutInMbxQueue
 227              	 .thumb
 228              	 .thumb_func
 230              	PutInMbxQueue:
 231              	.LFB175:
 232              	 .file 2 "../SSC/Src/mailbox.c"
   1:../SSC/Src/mailbox.c **** /*
   2:../SSC/Src/mailbox.c **** * This source file is part of the EtherCAT Slave Stack Code licensed by Beckhoff Automation GmbH & 
   3:../SSC/Src/mailbox.c **** * The corresponding license agreement applies. This hint shall not be removed.
   4:../SSC/Src/mailbox.c **** * https://www.beckhoff.com/media/downloads/slave-stack-code/ethercat_ssc_license.pdf
   5:../SSC/Src/mailbox.c **** */
   6:../SSC/Src/mailbox.c **** 
   7:../SSC/Src/mailbox.c **** /**
   8:../SSC/Src/mailbox.c **** \addtogroup Mailbox Mailbox Functions
   9:../SSC/Src/mailbox.c **** @{
  10:../SSC/Src/mailbox.c **** */
  11:../SSC/Src/mailbox.c **** 
  12:../SSC/Src/mailbox.c **** /**
  13:../SSC/Src/mailbox.c **** \file    mailbox.c
  14:../SSC/Src/mailbox.c **** \author EthercatSSC@beckhoff.com
  15:../SSC/Src/mailbox.c **** \brief Implementation
  16:../SSC/Src/mailbox.c **** 
  17:../SSC/Src/mailbox.c **** <br>Description of the mailbox buffer handling (MAILBOX_QUEUE = 0):<br>
  18:../SSC/Src/mailbox.c **** There are two mailbox buffer for sending and receiving mailbox services.<br>
  19:../SSC/Src/mailbox.c **** Normal operation:<br>
  20:../SSC/Src/mailbox.c **** When starting the mailbox handler psWriteMbx contains mailbox buffer 1,<br>
  21:../SSC/Src/mailbox.c **** psReadMbx, psRepeatMbx and psStoreMbx are 0.<br>
  22:../SSC/Src/mailbox.c **** In this state a repeat request would be ignored because there was no service sent yet.<br>
  23:../SSC/Src/mailbox.c **** When the first mailbox service is sent (in MBX_CopyToSendMailbox), psWriteMbx gets mailbox buffer 2
  24:../SSC/Src/mailbox.c **** and psReadMbx gets the sent mailbox buffer 1, psRepeatMbx and psStoreMbx are still 0.<br>
  25:../SSC/Src/mailbox.c **** When the first mailbox service was read from the master, the sent mailbox buffer 1 is stored<br>
  26:../SSC/Src/mailbox.c **** in psRepeatMbx (in MBX_MailboxReadInd).<br>
  27:../SSC/Src/mailbox.c **** After that psReadMbx gets always the actual sent mailbox buffer, psWriteMbx is set to 0 (another<br
  28:../SSC/Src/mailbox.c **** received mailbox service from the master will not be handled until the sent mailbox service was rea
  29:../SSC/Src/mailbox.c **** and MBX_MailboxReadInd was called).<br>
  30:../SSC/Src/mailbox.c **** When the mailbox service is read, psWriteMbx gets the Buffer of psRepeatMbx and psRepeatMbx gets th
  31:../SSC/Src/mailbox.c **** buffer of psReadMbx.<br>
  32:../SSC/Src/mailbox.c **** Repeat Request from the master:<br>
  33:../SSC/Src/mailbox.c **** When a Repeat from the master is requested (MBX_MailboxRepeatReq), there are three different possib
  34:../SSC/Src/mailbox.c **** 1. no mailbox service was sent since the mailbox handler was started (psRepeatMbx = 0): nothing to 
  35:../SSC/Src/mailbox.c **** 2. the acknowledge of the last sent mailbox service was received (in MBX_MailboxReadInd) (bSendMbxI
  36:../SSC/Src/mailbox.c **** the last sent mailbox service (psRepeatMbx) will be sent again (in MBX_CopyToSendMailbox) and store
  37:../SSC/Src/mailbox.c **** psRepeatMbx will be set to 0<br>
  38:../SSC/Src/mailbox.c **** 3. the acknowledge of the last sent mailbox service was not received (psReadMbx and psRepeatMbx con
  39:../SSC/Src/mailbox.c **** psReadMbx is still in the mailbox (because MBX_MailboxReadInd is not called yet, bSendMbxIsFull = 1
  40:../SSC/Src/mailbox.c **** psReadMbx will be deleted in the mailbox (call of DisableSyncManChannel and EnableSyncManChannel) a
  41:../SSC/Src/mailbox.c **** stored in psStoreMbx, psRepeatMbx will be sent again (in MBX_CopyToSendMailbox) and stored in psRea
  42:../SSC/Src/mailbox.c **** psRepeatMbx will be set to 0.<br>
  43:../SSC/Src/mailbox.c **** When the repeated mailbox service was sent (call of MBX_MailboxReadInd), psReadMbx will be stored i
  44:../SSC/Src/mailbox.c **** and psStoreMbx will be sent (in MBX_CopyToSendMailbox) and stored in psReadMbx, psStoreMbx will be 
  45:../SSC/Src/mailbox.c **** 
  46:../SSC/Src/mailbox.c **** <br>Description of the mailbox buffer handling (MAILBOX_QUEUE = 1):<br>
  47:../SSC/Src/mailbox.c **** There are two mailbox buffer for sending and receiving mailbox services.<br>
  48:../SSC/Src/mailbox.c **** Normal operation (psWriteMbx is only used for local storage):<br>
  49:../SSC/Src/mailbox.c **** When starting the mailbox handler psReadMbx, psRepeatMbx and psStoreMbx are 0.<br>
  50:../SSC/Src/mailbox.c **** In this state a repeat request would be ignored because there was no service sent yet.<br>
  51:../SSC/Src/mailbox.c **** When a mailbox service is received from the master (in MBX_CheckAndCopyMailbox) a mailbox buffer<br
  52:../SSC/Src/mailbox.c **** will be get with APPL_AllocMailboxBuffer and the corresponding protocol service function will<br>
  53:../SSC/Src/mailbox.c **** be called (in MBX_WriteMailboxInd). This buffer shall be used for the protocol service response.<br
  54:../SSC/Src/mailbox.c **** When the first mailbox service is sent (in MBX_CopyToSendMailbox), psReadMbx gets the sent mailbox 
  55:../SSC/Src/mailbox.c **** psRepeatMbx and psStoreMbx are still 0.<br>
  56:../SSC/Src/mailbox.c **** When the first mailbox service was read from the master, the sent mailbox buffer (psReadMbx) is sto
  57:../SSC/Src/mailbox.c **** in psRepeatMbx (in MBX_MailboxReadInd).<br>
  58:../SSC/Src/mailbox.c **** After that psReadMbx gets always the actual sent mailbox buffer (in MBX_CopyToSendMailbox)<br>
  59:../SSC/Src/mailbox.c **** When the mailbox service is read, psRepeatMbx is returned (with APPL_FreeMailboxBuffer) and psRepea
  60:../SSC/Src/mailbox.c **** buffer of psReadMbx.<br>
  61:../SSC/Src/mailbox.c **** Repeat Request from the master:<br>
  62:../SSC/Src/mailbox.c **** When a Repeat from the master is requested (MBX_MailboxRepeatReq), there are three different possib
  63:../SSC/Src/mailbox.c **** 1. no mailbox service was sent since the mailbox handler was started (psRepeatMbx = 0): nothing to 
  64:../SSC/Src/mailbox.c **** 2. the acknowledge of the last sent mailbox service was received (in MBX_MailboxReadInd) (bSendMbxI
  65:../SSC/Src/mailbox.c **** the last sent mailbox service (psRepeatMbx) will be sent again (in MBX_CopyToSendMailbox) and store
  66:../SSC/Src/mailbox.c **** psRepeatMbx will be set to 0<br>
  67:../SSC/Src/mailbox.c **** 3. the acknowledge of the last sent mailbox service was not received (psReadMbx and psRepeatMbx con
  68:../SSC/Src/mailbox.c **** psReadMbx is still in the mailbox (because MBX_MailboxReadInd is not called yet, bSendMbxIsFull = 1
  69:../SSC/Src/mailbox.c **** psReadMbx will be deleted in the mailbox (call of DisableSyncManChannel and EnableSyncManChannel) a
  70:../SSC/Src/mailbox.c **** stored in psStoreMbx, psRepeatMbx will be sent again (in MBX_CopyToSendMailbox) and stored in psRea
  71:../SSC/Src/mailbox.c **** psRepeatMbx will be set to 0.<br>
  72:../SSC/Src/mailbox.c **** When the repeated mailbox service was sent (call of MBX_MailboxReadInd), psReadMbx will be stored i
  73:../SSC/Src/mailbox.c **** and psStoreMbx will be sent (in MBX_CopyToSendMailbox) and stored in psReadMbx, psStoreMbx will be 
  74:../SSC/Src/mailbox.c **** 
  75:../SSC/Src/mailbox.c **** \version 5.13
  76:../SSC/Src/mailbox.c **** 
  77:../SSC/Src/mailbox.c **** <br>Changes to version V5.12:<br>
  78:../SSC/Src/mailbox.c **** V5.13 EOE1: <br>
  79:../SSC/Src/mailbox.c **** V5.13 MBX2: clear unused bytes before write mailbox response<br>
  80:../SSC/Src/mailbox.c **** V5.13 MBX3: fix potential double free memory and lost of last read mailbox data<br>
  81:../SSC/Src/mailbox.c **** V5.13 TEST3: 0x2040.4 send ARP on unsupported mailbox request<br>
  82:../SSC/Src/mailbox.c **** <br>Changes to version V5.11:<br>
  83:../SSC/Src/mailbox.c **** V5.12 EOE5: free pending buffer in EoE_Init, EoE_Init is called on startup and PI transition<br>
  84:../SSC/Src/mailbox.c **** V5.12 MBX1: use only 16Bit variables to write the last byte of the mailbox buffer in case of ESC_16
  85:../SSC/Src/mailbox.c **** V5.12 MBX2: do not set the pending indication in case of a EoE request, application triggered eoe d
  86:../SSC/Src/mailbox.c **** V5.12 MBX3: handle incomplete mailbox communication<br>
  87:../SSC/Src/mailbox.c **** V5.12 MBX4: in case of a disable mailbox queue and two consecutive foe uploads the mailbox receive 
  88:../SSC/Src/mailbox.c **** <br>Changes to version V5.10:<br>
  89:../SSC/Src/mailbox.c **** V5.11 ECAT10: change PROTO handling to prevent compiler errors<br>
  90:../SSC/Src/mailbox.c **** V5.11 ECAT7: add missing big endian swapping<br>
  91:../SSC/Src/mailbox.c **** V5.11 HW1: "move hardware independent functions ""HW_DisableSyncManChannel()"", ""HW_EnableSyncManC
  92:../SSC/Src/mailbox.c **** V5.11 MBX2: "check in IP if enough dynamic memory is available to handle mailbox communication, if 
  93:../SSC/Src/mailbox.c **** V5.11 MBX3: set application triggered emergency and EoE data to pending if no mailbox queue is supp
  94:../SSC/Src/mailbox.c **** V5.11 TEST4: add new mailbox test behavior (the master mailbox cnt shall be incremented by 1 and th
  95:../SSC/Src/mailbox.c **** <br>Changes to version V5.01:<br>
  96:../SSC/Src/mailbox.c **** V5.10 EOE3: Change local send frame pending indication variable to a global variable (it need to be
  97:../SSC/Src/mailbox.c **** V5.10 ESC6: Update SyncManager register size (only for 8Bit ESC access)<br>
  98:../SSC/Src/mailbox.c **** V5.10 MBX2: Allocate only memory for current configured mailbox size (max supported size was alloca
  99:../SSC/Src/mailbox.c **** <br>Changes to version V5.0:<br>
 100:../SSC/Src/mailbox.c **** V5.01 ESC2: Add missed value swapping<br>
 101:../SSC/Src/mailbox.c **** V5.01 MBX2: Return an error if length specified in mailbnox header is too large.<br>
 102:../SSC/Src/mailbox.c **** <br>Changes to version V4.40:<br>
 103:../SSC/Src/mailbox.c **** V5.0 ECAT3: Global dummy variables used for dummy ESC operations.<br>
 104:../SSC/Src/mailbox.c **** V5.0 ESC1: ESC 32Bit Access added.<br>
 105:../SSC/Src/mailbox.c **** V5.0 MBX2: Prevent double swapping (MBX repeat service) of MBX length field.<br>
 106:../SSC/Src/mailbox.c **** V5.0 MBX4: Unlock SM buffer based on SM state.<br>
 107:../SSC/Src/mailbox.c **** <br>Changes to version V4.11:<br>
 108:../SSC/Src/mailbox.c **** V4.40 MBX8: Handle pending mailbox data even if mailbox queue is enabled<br>
 109:../SSC/Src/mailbox.c **** V4.40 MBX7: Reset SyncManger 1 Repeat Acknowledge bit if local variable is reset<br>
 110:../SSC/Src/mailbox.c **** V4.40 EMCY2: Send queued emergency messages<br>
 111:../SSC/Src/mailbox.c **** V4.40 BOOT2: Support only FoE in Bootstrap state<br>
 112:../SSC/Src/mailbox.c **** V4.40 MBX5: Prevent multiple free buffer<br>
 113:../SSC/Src/mailbox.c **** V4.40 MBX6: change return value if no mailbox buffer is available<br>
 114:../SSC/Src/mailbox.c **** <br>Changes to version V4.08:<br>
 115:../SSC/Src/mailbox.c **** V4.11 MBX 1: free some dynamic memory to avoid memory leaks in the mailbox queue<br>
 116:../SSC/Src/mailbox.c **** <br>Changes to version V4.07:<br>
 117:../SSC/Src/mailbox.c **** V4.10 MBX 1: check Mailbox message buffer and print emergency messages<br>
 118:../SSC/Src/mailbox.c ****                during state change Init -> PreOP<br>
 119:../SSC/Src/mailbox.c **** <br>Changes to version V4.07:<br>
 120:../SSC/Src/mailbox.c **** V4.08 MBX 1: The mailbox queue was added (switch MAILBOX_QUEUE), if the<br>
 121:../SSC/Src/mailbox.c ****              mailbox should be handled in the ESC-Interrupt Service Routine<br>
 122:../SSC/Src/mailbox.c ****              the defines ENTER_MBX_CRITICAL and LEAVE_MBX_CRITICAL could be used<br>
 123:../SSC/Src/mailbox.c ****              to disable the interrupts or change the priority<br>
 124:../SSC/Src/mailbox.c **** V4.08 AOE 1:    AoE was added<br>
 125:../SSC/Src/mailbox.c **** <br>Changes to version V4.06:<br>
 126:../SSC/Src/mailbox.c **** V4.07 ECAT 1: The sources for SPI and MCI were merged (in ecat_def.h<br>
 127:../SSC/Src/mailbox.c ****                    set the switch MCI_HW to 1 when using the MCI,<br>
 128:../SSC/Src/mailbox.c ****                    set the switch SPI_HW to 1 when using the SPI
 129:../SSC/Src/mailbox.c **** */
 130:../SSC/Src/mailbox.c **** 
 131:../SSC/Src/mailbox.c **** 
 132:../SSC/Src/mailbox.c **** /*---------------------------------------------------------------------------------------
 133:../SSC/Src/mailbox.c **** ------
 134:../SSC/Src/mailbox.c **** ------    Includes
 135:../SSC/Src/mailbox.c **** ------
 136:../SSC/Src/mailbox.c **** ---------------------------------------------------------------------------------------*/
 137:../SSC/Src/mailbox.c **** 
 138:../SSC/Src/mailbox.c **** #include "ecat_def.h"
 139:../SSC/Src/mailbox.c **** 
 140:../SSC/Src/mailbox.c **** 
 141:../SSC/Src/mailbox.c **** #include "ecatslv.h"
 142:../SSC/Src/mailbox.c **** 
 143:../SSC/Src/mailbox.c **** 
 144:../SSC/Src/mailbox.c **** 
 145:../SSC/Src/mailbox.c **** #define    _MAILBOX_    1
 146:../SSC/Src/mailbox.c **** #include "mailbox.h"
 147:../SSC/Src/mailbox.c **** #undef _MAILBOX_
 148:../SSC/Src/mailbox.c **** /*remove definition of _MAILBOX_ (#ifdef is used in mailbox.h)*/
 149:../SSC/Src/mailbox.c **** 
 150:../SSC/Src/mailbox.c **** #include "ecatcoe.h"
 151:../SSC/Src/mailbox.c **** #include "sdoserv.h"
 152:../SSC/Src/mailbox.c **** 
 153:../SSC/Src/mailbox.c **** 
 154:../SSC/Src/mailbox.c **** /*--------------------------------------------------------------------------------------
 155:../SSC/Src/mailbox.c **** ------
 156:../SSC/Src/mailbox.c **** ------    internal Types and Defines
 157:../SSC/Src/mailbox.c **** ------
 158:../SSC/Src/mailbox.c **** --------------------------------------------------------------------------------------*/
 159:../SSC/Src/mailbox.c **** 
 160:../SSC/Src/mailbox.c **** /*--------------------------------------------------------------------------------------
 161:../SSC/Src/mailbox.c **** ------
 162:../SSC/Src/mailbox.c **** ------    internal Variables
 163:../SSC/Src/mailbox.c **** ------
 164:../SSC/Src/mailbox.c **** --------------------------------------------------------------------------------------*/
 165:../SSC/Src/mailbox.c **** /*variables are declared in ecatslv.c*/
 166:../SSC/Src/mailbox.c ****     extern VARVOLATILE UINT8 u8dummy;
 167:../SSC/Src/mailbox.c **** 
 168:../SSC/Src/mailbox.c ****     BOOL bNoMbxMemoryAvailable; /**< \brief Indicates if enough dynamic memory is available to hand
 169:../SSC/Src/mailbox.c **** 
 170:../SSC/Src/mailbox.c **** /*--------------------------------------------------------------------------------------
 171:../SSC/Src/mailbox.c **** ------
 172:../SSC/Src/mailbox.c **** ------    internal functions
 173:../SSC/Src/mailbox.c **** ------
 174:../SSC/Src/mailbox.c **** --------------------------------------------------------------------------------------*/
 175:../SSC/Src/mailbox.c **** 
 176:../SSC/Src/mailbox.c **** /*---------------------------------------------------------------------------------------
 177:../SSC/Src/mailbox.c **** ------
 178:../SSC/Src/mailbox.c **** ------    functions
 179:../SSC/Src/mailbox.c **** ------
 180:../SSC/Src/mailbox.c **** ---------------------------------------------------------------------------------------*/
 181:../SSC/Src/mailbox.c **** 
 182:../SSC/Src/mailbox.c **** 
 183:../SSC/Src/mailbox.c **** ///////////////////////////////////////////////////////////////////////////////////////////
 184:../SSC/Src/mailbox.c **** //
 185:../SSC/Src/mailbox.c **** //    PutInMbxQueue
 186:../SSC/Src/mailbox.c **** //
 187:../SSC/Src/mailbox.c **** 
 188:../SSC/Src/mailbox.c **** UINT8 PutInMbxQueue(TMBX MBXMEM * pMbx, TMBXQUEUE MBXMEM * pQueue)
 189:../SSC/Src/mailbox.c **** {
 233              	 .loc 2 189 0
 234              	 .cfi_startproc
 235              	 
 236              	 
 237              	 
 238 0000 80B4     	 push {r7}
 239              	.LCFI20:
 240              	 .cfi_def_cfa_offset 4
 241              	 .cfi_offset 7,-4
 242 0002 85B0     	 sub sp,sp,#20
 243              	.LCFI21:
 244              	 .cfi_def_cfa_offset 24
 245 0004 00AF     	 add r7,sp,#0
 246              	.LCFI22:
 247              	 .cfi_def_cfa_register 7
 248 0006 7860     	 str r0,[r7,#4]
 249 0008 3960     	 str r1,[r7]
 190:../SSC/Src/mailbox.c ****     UINT16 lastInQueue;
 191:../SSC/Src/mailbox.c ****     ENTER_MBX_CRITICAL;
 192:../SSC/Src/mailbox.c **** 
 193:../SSC/Src/mailbox.c **** 
 194:../SSC/Src/mailbox.c ****     lastInQueue = pQueue->lastInQueue+1;
 250              	 .loc 2 194 0
 251 000a 3B68     	 ldr r3,[r7]
 252 000c 5B88     	 ldrh r3,[r3,#2]
 253 000e 0133     	 adds r3,r3,#1
 254 0010 FB81     	 strh r3,[r7,#14]
 195:../SSC/Src/mailbox.c ****     if (lastInQueue == pQueue->maxQueueSize)
 255              	 .loc 2 195 0
 256 0012 3B68     	 ldr r3,[r7]
 257 0014 9B88     	 ldrh r3,[r3,#4]
 258 0016 FA89     	 ldrh r2,[r7,#14]
 259 0018 9A42     	 cmp r2,r3
 260 001a 01D1     	 bne .L6
 196:../SSC/Src/mailbox.c ****     {
 197:../SSC/Src/mailbox.c ****         // Umbruch der Queue
 198:../SSC/Src/mailbox.c ****         lastInQueue = 0;
 261              	 .loc 2 198 0
 262 001c 0023     	 movs r3,#0
 263 001e FB81     	 strh r3,[r7,#14]
 264              	.L6:
 199:../SSC/Src/mailbox.c ****     }
 200:../SSC/Src/mailbox.c **** 
 201:../SSC/Src/mailbox.c ****     if (pQueue->firstInQueue == lastInQueue)
 265              	 .loc 2 201 0
 266 0020 3B68     	 ldr r3,[r7]
 267 0022 1B88     	 ldrh r3,[r3]
 268 0024 FA89     	 ldrh r2,[r7,#14]
 269 0026 9A42     	 cmp r2,r3
 270 0028 01D1     	 bne .L7
 202:../SSC/Src/mailbox.c ****     {
 203:../SSC/Src/mailbox.c ****         // Ueberlauf der Queue -> letztes Element wieder herausnehmen
 204:../SSC/Src/mailbox.c ****         LEAVE_MBX_CRITICAL;
 205:../SSC/Src/mailbox.c ****         return MBXERR_NOMOREMEMORY;
 271              	 .loc 2 205 0
 272 002a 0723     	 movs r3,#7
 273 002c 0BE0     	 b .L8
 274              	.L7:
 206:../SSC/Src/mailbox.c ****     }
 207:../SSC/Src/mailbox.c **** 
 208:../SSC/Src/mailbox.c ****     pQueue->queue[pQueue->lastInQueue] = pMbx;
 275              	 .loc 2 208 0
 276 002e 3B68     	 ldr r3,[r7]
 277 0030 5B88     	 ldrh r3,[r3,#2]
 278 0032 1A46     	 mov r2,r3
 279 0034 3B68     	 ldr r3,[r7]
 280 0036 0232     	 adds r2,r2,#2
 281 0038 7968     	 ldr r1,[r7,#4]
 282 003a 43F82210 	 str r1,[r3,r2,lsl#2]
 209:../SSC/Src/mailbox.c ****     pQueue->lastInQueue = lastInQueue;
 283              	 .loc 2 209 0
 284 003e 3B68     	 ldr r3,[r7]
 285 0040 FA89     	 ldrh r2,[r7,#14]
 286 0042 5A80     	 strh r2,[r3,#2]
 210:../SSC/Src/mailbox.c **** 
 211:../SSC/Src/mailbox.c ****     LEAVE_MBX_CRITICAL;
 212:../SSC/Src/mailbox.c **** 
 213:../SSC/Src/mailbox.c ****     return 0;
 287              	 .loc 2 213 0
 288 0044 0023     	 movs r3,#0
 289              	.L8:
 214:../SSC/Src/mailbox.c **** }
 290              	 .loc 2 214 0
 291 0046 1846     	 mov r0,r3
 292 0048 1437     	 adds r7,r7,#20
 293              	.LCFI23:
 294              	 .cfi_def_cfa_offset 4
 295 004a BD46     	 mov sp,r7
 296              	.LCFI24:
 297              	 .cfi_def_cfa_register 13
 298              	 
 299 004c 5DF8047B 	 ldr r7,[sp],#4
 300              	.LCFI25:
 301              	 .cfi_restore 7
 302              	 .cfi_def_cfa_offset 0
 303 0050 7047     	 bx lr
 304              	 .cfi_endproc
 305              	.LFE175:
 307 0052 00BF     	 .section .text.GetOutOfMbxQueue,"ax",%progbits
 308              	 .align 2
 309              	 .global GetOutOfMbxQueue
 310              	 .thumb
 311              	 .thumb_func
 313              	GetOutOfMbxQueue:
 314              	.LFB176:
 215:../SSC/Src/mailbox.c **** 
 216:../SSC/Src/mailbox.c **** ///////////////////////////////////////////////////////////////////////////////////////////
 217:../SSC/Src/mailbox.c **** //
 218:../SSC/Src/mailbox.c **** //    GetOutOfMbxQueue
 219:../SSC/Src/mailbox.c **** //
 220:../SSC/Src/mailbox.c **** 
 221:../SSC/Src/mailbox.c **** TMBX MBXMEM * GetOutOfMbxQueue(TMBXQUEUE MBXMEM * pQueue)
 222:../SSC/Src/mailbox.c **** {
 315              	 .loc 2 222 0
 316              	 .cfi_startproc
 317              	 
 318              	 
 319              	 
 320 0000 80B4     	 push {r7}
 321              	.LCFI26:
 322              	 .cfi_def_cfa_offset 4
 323              	 .cfi_offset 7,-4
 324 0002 85B0     	 sub sp,sp,#20
 325              	.LCFI27:
 326              	 .cfi_def_cfa_offset 24
 327 0004 00AF     	 add r7,sp,#0
 328              	.LCFI28:
 329              	 .cfi_def_cfa_register 7
 330 0006 7860     	 str r0,[r7,#4]
 223:../SSC/Src/mailbox.c ****     TMBX MBXMEM * pMbx;
 224:../SSC/Src/mailbox.c ****     ENTER_MBX_CRITICAL;
 225:../SSC/Src/mailbox.c **** 
 226:../SSC/Src/mailbox.c ****     if (pQueue->firstInQueue != pQueue->lastInQueue)
 331              	 .loc 2 226 0
 332 0008 7B68     	 ldr r3,[r7,#4]
 333 000a 1A88     	 ldrh r2,[r3]
 334 000c 7B68     	 ldr r3,[r7,#4]
 335 000e 5B88     	 ldrh r3,[r3,#2]
 336 0010 9A42     	 cmp r2,r3
 337 0012 19D0     	 beq .L10
 338              	.LBB2:
 227:../SSC/Src/mailbox.c ****     {
 228:../SSC/Src/mailbox.c ****         // Queue ist nicht leer
 229:../SSC/Src/mailbox.c ****         UINT16 firstInQueue = pQueue->firstInQueue;
 339              	 .loc 2 229 0
 340 0014 7B68     	 ldr r3,[r7,#4]
 341 0016 1B88     	 ldrh r3,[r3]
 342 0018 7B81     	 strh r3,[r7,#10]
 230:../SSC/Src/mailbox.c ****         pMbx = pQueue->queue[firstInQueue];
 343              	 .loc 2 230 0
 344 001a 7A89     	 ldrh r2,[r7,#10]
 345 001c 7B68     	 ldr r3,[r7,#4]
 346 001e 0232     	 adds r2,r2,#2
 347 0020 53F82230 	 ldr r3,[r3,r2,lsl#2]
 348 0024 FB60     	 str r3,[r7,#12]
 231:../SSC/Src/mailbox.c ****         firstInQueue++;
 349              	 .loc 2 231 0
 350 0026 7B89     	 ldrh r3,[r7,#10]
 351 0028 0133     	 adds r3,r3,#1
 352 002a 7B81     	 strh r3,[r7,#10]
 232:../SSC/Src/mailbox.c ****         pQueue->firstInQueue = firstInQueue;
 353              	 .loc 2 232 0
 354 002c 7B68     	 ldr r3,[r7,#4]
 355 002e 7A89     	 ldrh r2,[r7,#10]
 356 0030 1A80     	 strh r2,[r3]
 233:../SSC/Src/mailbox.c ****         
 234:../SSC/Src/mailbox.c ****         if (pQueue->firstInQueue == pQueue->maxQueueSize)
 357              	 .loc 2 234 0
 358 0032 7B68     	 ldr r3,[r7,#4]
 359 0034 1A88     	 ldrh r2,[r3]
 360 0036 7B68     	 ldr r3,[r7,#4]
 361 0038 9B88     	 ldrh r3,[r3,#4]
 362 003a 9A42     	 cmp r2,r3
 363 003c 03D1     	 bne .L11
 235:../SSC/Src/mailbox.c ****         {
 236:../SSC/Src/mailbox.c ****             // Umbruch der Queue
 237:../SSC/Src/mailbox.c ****             pQueue->firstInQueue = 0;
 364              	 .loc 2 237 0
 365 003e 7B68     	 ldr r3,[r7,#4]
 366 0040 0022     	 movs r2,#0
 367 0042 1A80     	 strh r2,[r3]
 368              	.LBE2:
 369 0044 02E0     	 b .L12
 370              	.L11:
 371 0046 01E0     	 b .L12
 372              	.L10:
 238:../SSC/Src/mailbox.c ****         }
 239:../SSC/Src/mailbox.c ****     }
 240:../SSC/Src/mailbox.c ****     else
 241:../SSC/Src/mailbox.c ****     {
 242:../SSC/Src/mailbox.c ****         pMbx = 0;
 373              	 .loc 2 242 0
 374 0048 0023     	 movs r3,#0
 375 004a FB60     	 str r3,[r7,#12]
 376              	.L12:
 243:../SSC/Src/mailbox.c ****     }
 244:../SSC/Src/mailbox.c **** 
 245:../SSC/Src/mailbox.c **** 
 246:../SSC/Src/mailbox.c ****     LEAVE_MBX_CRITICAL;
 247:../SSC/Src/mailbox.c **** 
 248:../SSC/Src/mailbox.c ****     return pMbx;
 377              	 .loc 2 248 0
 378 004c FB68     	 ldr r3,[r7,#12]
 249:../SSC/Src/mailbox.c **** }
 379              	 .loc 2 249 0
 380 004e 1846     	 mov r0,r3
 381 0050 1437     	 adds r7,r7,#20
 382              	.LCFI29:
 383              	 .cfi_def_cfa_offset 4
 384 0052 BD46     	 mov sp,r7
 385              	.LCFI30:
 386              	 .cfi_def_cfa_register 13
 387              	 
 388 0054 5DF8047B 	 ldr r7,[sp],#4
 389              	.LCFI31:
 390              	 .cfi_restore 7
 391              	 .cfi_def_cfa_offset 0
 392 0058 7047     	 bx lr
 393              	 .cfi_endproc
 394              	.LFE176:
 396 005a 00BF     	 .section .text.MBX_Init,"ax",%progbits
 397              	 .align 2
 398              	 .global MBX_Init
 399              	 .thumb
 400              	 .thumb_func
 402              	MBX_Init:
 403              	.LFB177:
 250:../SSC/Src/mailbox.c **** 
 251:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 252:../SSC/Src/mailbox.c **** /**
 253:../SSC/Src/mailbox.c ****  \brief    This function intialize the Mailbox Interface.
 254:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 255:../SSC/Src/mailbox.c **** 
 256:../SSC/Src/mailbox.c **** void MBX_Init(void)
 257:../SSC/Src/mailbox.c **** {
 404              	 .loc 2 257 0
 405              	 .cfi_startproc
 406              	 
 407              	 
 408              	 
 409 0000 80B4     	 push {r7}
 410              	.LCFI32:
 411              	 .cfi_def_cfa_offset 4
 412              	 .cfi_offset 7,-4
 413 0002 83B0     	 sub sp,sp,#12
 414              	.LCFI33:
 415              	 .cfi_def_cfa_offset 16
 416 0004 00AF     	 add r7,sp,#0
 417              	.LCFI34:
 418              	 .cfi_def_cfa_register 7
 258:../SSC/Src/mailbox.c ****     
 259:../SSC/Src/mailbox.c ****     u16ReceiveMbxSize = MIN_MBX_SIZE;
 419              	 .loc 2 259 0
 420 0006 294B     	 ldr r3,.L15
 421 0008 2422     	 movs r2,#36
 422 000a 1A80     	 strh r2,[r3]
 260:../SSC/Src/mailbox.c ****     u16SendMbxSize = MAX_MBX_SIZE;
 423              	 .loc 2 260 0
 424 000c 284B     	 ldr r3,.L15+4
 425 000e 8022     	 movs r2,#128
 426 0010 1A80     	 strh r2,[r3]
 261:../SSC/Src/mailbox.c ****     u16EscAddrReceiveMbx = MIN_MBX_WRITE_ADDRESS;
 427              	 .loc 2 261 0
 428 0012 284B     	 ldr r3,.L15+8
 429 0014 4FF48052 	 mov r2,#4096
 430 0018 1A80     	 strh r2,[r3]
 262:../SSC/Src/mailbox.c ****     u16EscAddrSendMbx = MIN_MBX_READ_ADDRESS;
 431              	 .loc 2 262 0
 432 001a 274B     	 ldr r3,.L15+12
 433 001c 4FF48052 	 mov r2,#4096
 434 0020 1A80     	 strh r2,[r3]
 263:../SSC/Src/mailbox.c **** 
 264:../SSC/Src/mailbox.c ****     sMbxReceiveQueue.firstInQueue    = 0;
 435              	 .loc 2 264 0
 436 0022 264B     	 ldr r3,.L15+16
 437 0024 0022     	 movs r2,#0
 438 0026 1A80     	 strh r2,[r3]
 265:../SSC/Src/mailbox.c ****     sMbxReceiveQueue.lastInQueue     = 0;
 439              	 .loc 2 265 0
 440 0028 244B     	 ldr r3,.L15+16
 441 002a 0022     	 movs r2,#0
 442 002c 5A80     	 strh r2,[r3,#2]
 266:../SSC/Src/mailbox.c ****     sMbxReceiveQueue.maxQueueSize = MAX_MBX_QUEUE_SIZE;
 443              	 .loc 2 266 0
 444 002e 234B     	 ldr r3,.L15+16
 445 0030 0A22     	 movs r2,#10
 446 0032 9A80     	 strh r2,[r3,#4]
 267:../SSC/Src/mailbox.c ****     sMbxSendQueue.firstInQueue        = 0;
 447              	 .loc 2 267 0
 448 0034 224B     	 ldr r3,.L15+20
 449 0036 0022     	 movs r2,#0
 450 0038 1A80     	 strh r2,[r3]
 268:../SSC/Src/mailbox.c ****     sMbxSendQueue.lastInQueue         = 0;
 451              	 .loc 2 268 0
 452 003a 214B     	 ldr r3,.L15+20
 453 003c 0022     	 movs r2,#0
 454 003e 5A80     	 strh r2,[r3,#2]
 269:../SSC/Src/mailbox.c ****     sMbxSendQueue.maxQueueSize     = MAX_MBX_QUEUE_SIZE;
 455              	 .loc 2 269 0
 456 0040 1F4B     	 ldr r3,.L15+20
 457 0042 0A22     	 movs r2,#10
 458 0044 9A80     	 strh r2,[r3,#4]
 270:../SSC/Src/mailbox.c ****     psWriteMbx  = NULL;
 459              	 .loc 2 270 0
 460 0046 1F4B     	 ldr r3,.L15+24
 461 0048 0022     	 movs r2,#0
 462 004a 1A60     	 str r2,[r3]
 271:../SSC/Src/mailbox.c **** 
 272:../SSC/Src/mailbox.c **** 
 273:../SSC/Src/mailbox.c ****     psRepeatMbx = NULL;
 463              	 .loc 2 273 0
 464 004c 1E4B     	 ldr r3,.L15+28
 465 004e 0022     	 movs r2,#0
 466 0050 1A60     	 str r2,[r3]
 274:../SSC/Src/mailbox.c ****     psReadMbx    = NULL;
 467              	 .loc 2 274 0
 468 0052 1E4B     	 ldr r3,.L15+32
 469 0054 0022     	 movs r2,#0
 470 0056 1A60     	 str r2,[r3]
 275:../SSC/Src/mailbox.c ****     psStoreMbx    = NULL;
 471              	 .loc 2 275 0
 472 0058 1D4B     	 ldr r3,.L15+36
 473 005a 0022     	 movs r2,#0
 474 005c 1A60     	 str r2,[r3]
 276:../SSC/Src/mailbox.c **** 
 277:../SSC/Src/mailbox.c ****     bMbxRepeatToggle    = FALSE;
 475              	 .loc 2 277 0
 476 005e 1D4B     	 ldr r3,.L15+40
 477 0060 0022     	 movs r2,#0
 478 0062 1A70     	 strb r2,[r3]
 479              	.LBB3:
 278:../SSC/Src/mailbox.c ****     /*Reset Repeat acknowledge bit of SyncManager1 (0x80F bit 2)*/
 279:../SSC/Src/mailbox.c ****     {
 280:../SSC/Src/mailbox.c ****         UINT8 sm1Activate = 0;
 480              	 .loc 2 280 0
 481 0064 0023     	 movs r3,#0
 482 0066 FB71     	 strb r3,[r7,#7]
 281:../SSC/Src/mailbox.c ****         HW_EscReadByte(sm1Activate,(ESC_SM_PDICONTROL_OFFSET + SIZEOF_SM_REGISTER));
 483              	 .loc 2 281 0
 484 0068 1B4B     	 ldr r3,.L15+44
 485 006a 1B78     	 ldrb r3,[r3]
 486 006c FB71     	 strb r3,[r7,#7]
 282:../SSC/Src/mailbox.c ****         sm1Activate &= ~0x02;
 487              	 .loc 2 282 0
 488 006e FB79     	 ldrb r3,[r7,#7]
 489 0070 23F00203 	 bic r3,r3,#2
 490 0074 FB71     	 strb r3,[r7,#7]
 283:../SSC/Src/mailbox.c ****         HW_EscWriteByte(sm1Activate,(ESC_SM_PDICONTROL_OFFSET + SIZEOF_SM_REGISTER));
 491              	 .loc 2 283 0
 492 0076 184A     	 ldr r2,.L15+44
 493 0078 FB79     	 ldrb r3,[r7,#7]
 494 007a 1370     	 strb r3,[r2]
 495              	.LBE3:
 284:../SSC/Src/mailbox.c ****     }
 285:../SSC/Src/mailbox.c ****     bMbxRunning = FALSE;
 496              	 .loc 2 285 0
 497 007c 174B     	 ldr r3,.L15+48
 498 007e 0022     	 movs r2,#0
 499 0080 1A70     	 strb r2,[r3]
 286:../SSC/Src/mailbox.c ****     bSendMbxIsFull = FALSE;
 500              	 .loc 2 286 0
 501 0082 174B     	 ldr r3,.L15+52
 502 0084 0022     	 movs r2,#0
 503 0086 1A70     	 strb r2,[r3]
 287:../SSC/Src/mailbox.c ****     bReceiveMbxIsLocked = FALSE;
 504              	 .loc 2 287 0
 505 0088 164B     	 ldr r3,.L15+56
 506 008a 0022     	 movs r2,#0
 507 008c 1A70     	 strb r2,[r3]
 288:../SSC/Src/mailbox.c ****     u8MailboxSendReqStored    = 0;
 508              	 .loc 2 288 0
 509 008e 164B     	 ldr r3,.L15+60
 510 0090 0022     	 movs r2,#0
 511 0092 1A70     	 strb r2,[r3]
 289:../SSC/Src/mailbox.c ****     u8MbxWriteCounter = 0;
 512              	 .loc 2 289 0
 513 0094 154B     	 ldr r3,.L15+64
 514 0096 0022     	 movs r2,#0
 515 0098 1A70     	 strb r2,[r3]
 290:../SSC/Src/mailbox.c ****     u8MbxReadCounter    = 0;
 516              	 .loc 2 290 0
 517 009a 154B     	 ldr r3,.L15+68
 518 009c 0022     	 movs r2,#0
 519 009e 1A70     	 strb r2,[r3]
 291:../SSC/Src/mailbox.c **** }
 520              	 .loc 2 291 0
 521 00a0 0C37     	 adds r7,r7,#12
 522              	.LCFI35:
 523              	 .cfi_def_cfa_offset 4
 524 00a2 BD46     	 mov sp,r7
 525              	.LCFI36:
 526              	 .cfi_def_cfa_register 13
 527              	 
 528 00a4 5DF8047B 	 ldr r7,[sp],#4
 529              	.LCFI37:
 530              	 .cfi_restore 7
 531              	 .cfi_def_cfa_offset 0
 532 00a8 7047     	 bx lr
 533              	.L16:
 534 00aa 00BF     	 .align 2
 535              	.L15:
 536 00ac 00000000 	 .word u16ReceiveMbxSize
 537 00b0 00000000 	 .word u16SendMbxSize
 538 00b4 00000000 	 .word u16EscAddrReceiveMbx
 539 00b8 00000000 	 .word u16EscAddrSendMbx
 540 00bc 00000000 	 .word sMbxReceiveQueue
 541 00c0 00000000 	 .word sMbxSendQueue
 542 00c4 00000000 	 .word psWriteMbx
 543 00c8 00000000 	 .word psRepeatMbx
 544 00cc 00000000 	 .word psReadMbx
 545 00d0 00000000 	 .word psStoreMbx
 546 00d4 00000000 	 .word bMbxRepeatToggle
 547 00d8 0F080154 	 .word 1409353743
 548 00dc 00000000 	 .word bMbxRunning
 549 00e0 00000000 	 .word bSendMbxIsFull
 550 00e4 00000000 	 .word bReceiveMbxIsLocked
 551 00e8 00000000 	 .word u8MailboxSendReqStored
 552 00ec 00000000 	 .word u8MbxWriteCounter
 553 00f0 00000000 	 .word u8MbxReadCounter
 554              	 .cfi_endproc
 555              	.LFE177:
 557              	 .section .text.MBX_StartMailboxHandler,"ax",%progbits
 558              	 .align 2
 559              	 .global MBX_StartMailboxHandler
 560              	 .thumb
 561              	 .thumb_func
 563              	MBX_StartMailboxHandler:
 564              	.LFB178:
 292:../SSC/Src/mailbox.c **** 
 293:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 294:../SSC/Src/mailbox.c **** /**
 295:../SSC/Src/mailbox.c **** 
 296:../SSC/Src/mailbox.c ****  \brief     This function includes the state transition from INIT to
 297:../SSC/Src/mailbox.c ****  \brief     PRE-OPERATIONAL in the EtherCAT Slave corresponding to
 298:../SSC/Src/mailbox.c ****  \brief     local management service Start Mailbox Handler
 299:../SSC/Src/mailbox.c ****  \brief     it is checked if the mailbox areas overlaps each other
 300:../SSC/Src/mailbox.c ****  \brief     and the Sync Manager channels 0 and 1 are enabled.
 301:../SSC/Src/mailbox.c ****  \brief     This function shall only be called if mailbox is supported.
 302:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 303:../SSC/Src/mailbox.c **** UINT16 MBX_StartMailboxHandler(void)
 304:../SSC/Src/mailbox.c **** {
 565              	 .loc 2 304 0
 566              	 .cfi_startproc
 567              	 
 568              	 
 569 0000 80B5     	 push {r7,lr}
 570              	.LCFI38:
 571              	 .cfi_def_cfa_offset 8
 572              	 .cfi_offset 7,-8
 573              	 .cfi_offset 14,-4
 574 0002 82B0     	 sub sp,sp,#8
 575              	.LCFI39:
 576              	 .cfi_def_cfa_offset 16
 577 0004 00AF     	 add r7,sp,#0
 578              	.LCFI40:
 579              	 .cfi_def_cfa_register 7
 305:../SSC/Src/mailbox.c ****     UINT16 result = 0;
 580              	 .loc 2 305 0
 581 0006 0023     	 movs r3,#0
 582 0008 FB80     	 strh r3,[r7,#6]
 306:../SSC/Src/mailbox.c ****     
 307:../SSC/Src/mailbox.c ****     /* get address of the receive mailbox sync manager (SM0) */
 308:../SSC/Src/mailbox.c ****     TSYNCMAN ESCMEM * pSyncMan = (TSYNCMAN ESCMEM *)GetSyncMan(MAILBOX_WRITE);
 583              	 .loc 2 308 0
 584 000a 0020     	 movs r0,#0
 585 000c FFF7FEFF 	 bl GetSyncMan
 586 0010 3860     	 str r0,[r7]
 309:../SSC/Src/mailbox.c **** 
 310:../SSC/Src/mailbox.c ****     /* store size of the receive mailbox */
 311:../SSC/Src/mailbox.c ****     u16ReceiveMbxSize     = pSyncMan->Length;
 587              	 .loc 2 311 0
 588 0012 3B68     	 ldr r3,[r7]
 589 0014 5B88     	 ldrh r3,[r3,#2]
 590 0016 9AB2     	 uxth r2,r3
 591 0018 334B     	 ldr r3,.L23
 592 001a 1A80     	 strh r2,[r3]
 312:../SSC/Src/mailbox.c ****     /* store the address of the receive mailbox */
 313:../SSC/Src/mailbox.c ****     u16EscAddrReceiveMbx = pSyncMan->PhysicalStartAddress;
 593              	 .loc 2 313 0
 594 001c 3B68     	 ldr r3,[r7]
 595 001e 1B88     	 ldrh r3,[r3]
 596 0020 9AB2     	 uxth r2,r3
 597 0022 324B     	 ldr r3,.L23+4
 598 0024 1A80     	 strh r2,[r3]
 314:../SSC/Src/mailbox.c **** 
 315:../SSC/Src/mailbox.c ****     /* get address of the send mailbox sync manager (SM1) */
 316:../SSC/Src/mailbox.c ****     pSyncMan =(TSYNCMAN ESCMEM *) GetSyncMan(MAILBOX_READ);
 599              	 .loc 2 316 0
 600 0026 0120     	 movs r0,#1
 601 0028 FFF7FEFF 	 bl GetSyncMan
 602 002c 3860     	 str r0,[r7]
 317:../SSC/Src/mailbox.c **** 
 318:../SSC/Src/mailbox.c ****     /* store the size of the send mailbox */
 319:../SSC/Src/mailbox.c ****     u16SendMbxSize = pSyncMan->Length;
 603              	 .loc 2 319 0
 604 002e 3B68     	 ldr r3,[r7]
 605 0030 5B88     	 ldrh r3,[r3,#2]
 606 0032 9AB2     	 uxth r2,r3
 607 0034 2E4B     	 ldr r3,.L23+8
 608 0036 1A80     	 strh r2,[r3]
 320:../SSC/Src/mailbox.c ****     /* store the address of the send mailbox */
 321:../SSC/Src/mailbox.c ****     u16EscAddrSendMbx = pSyncMan->PhysicalStartAddress;
 609              	 .loc 2 321 0
 610 0038 3B68     	 ldr r3,[r7]
 611 003a 1B88     	 ldrh r3,[r3]
 612 003c 9AB2     	 uxth r2,r3
 613 003e 2D4B     	 ldr r3,.L23+12
 614 0040 1A80     	 strh r2,[r3]
 322:../SSC/Src/mailbox.c **** 
 323:../SSC/Src/mailbox.c ****     // HBu 02.05.06: it should be checked if there are overlaps in the sync manager areas
 324:../SSC/Src/mailbox.c ****     if ((u16EscAddrReceiveMbx + u16ReceiveMbxSize) > u16EscAddrSendMbx && (u16EscAddrReceiveMbx < (
 615              	 .loc 2 324 0
 616 0042 2A4B     	 ldr r3,.L23+4
 617 0044 1B88     	 ldrh r3,[r3]
 618 0046 1A46     	 mov r2,r3
 619 0048 274B     	 ldr r3,.L23
 620 004a 1B88     	 ldrh r3,[r3]
 621 004c 1344     	 add r3,r3,r2
 622 004e 294A     	 ldr r2,.L23+12
 623 0050 1288     	 ldrh r2,[r2]
 624 0052 9342     	 cmp r3,r2
 625 0054 0CDD     	 ble .L18
 626              	 .loc 2 324 0 is_stmt 0 discriminator 1
 627 0056 254B     	 ldr r3,.L23+4
 628 0058 1B88     	 ldrh r3,[r3]
 629 005a 1A46     	 mov r2,r3
 630 005c 254B     	 ldr r3,.L23+12
 631 005e 1B88     	 ldrh r3,[r3]
 632 0060 1946     	 mov r1,r3
 633 0062 234B     	 ldr r3,.L23+8
 634 0064 1B88     	 ldrh r3,[r3]
 635 0066 0B44     	 add r3,r3,r1
 636 0068 9A42     	 cmp r2,r3
 637 006a 01DA     	 bge .L18
 325:../SSC/Src/mailbox.c ****     {
 326:../SSC/Src/mailbox.c ****         return ALSTATUSCODE_INVALIDMBXCFGINPREOP;
 638              	 .loc 2 326 0 is_stmt 1
 639 006c 1623     	 movs r3,#22
 640 006e 37E0     	 b .L19
 641              	.L18:
 327:../SSC/Src/mailbox.c ****     }
 328:../SSC/Src/mailbox.c **** 
 329:../SSC/Src/mailbox.c **** 
 330:../SSC/Src/mailbox.c ****     /* enable the receive mailbox sync manager channel */
 331:../SSC/Src/mailbox.c ****     EnableSyncManChannel(MAILBOX_WRITE);
 642              	 .loc 2 331 0
 643 0070 0020     	 movs r0,#0
 644 0072 FFF7FEFF 	 bl EnableSyncManChannel
 332:../SSC/Src/mailbox.c ****     /* enable the send mailbox sync manager channel */
 333:../SSC/Src/mailbox.c ****     EnableSyncManChannel(MAILBOX_READ);
 645              	 .loc 2 333 0
 646 0076 0120     	 movs r0,#1
 647 0078 FFF7FEFF 	 bl EnableSyncManChannel
 334:../SSC/Src/mailbox.c **** 
 335:../SSC/Src/mailbox.c ****         psWriteMbx = (TMBX MBXMEM *) APPL_AllocMailboxBuffer(u16ReceiveMbxSize);
 648              	 .loc 2 335 0
 649 007c 1A4B     	 ldr r3,.L23
 650 007e 1B88     	 ldrh r3,[r3]
 651 0080 1846     	 mov r0,r3
 652 0082 FFF7FEFF 	 bl malloc
 653 0086 0346     	 mov r3,r0
 654 0088 1A46     	 mov r2,r3
 655 008a 1B4B     	 ldr r3,.L23+16
 656 008c 1A60     	 str r2,[r3]
 336:../SSC/Src/mailbox.c ****         if(psWriteMbx == NULL)
 657              	 .loc 2 336 0
 658 008e 1A4B     	 ldr r3,.L23+16
 659 0090 1B68     	 ldr r3,[r3]
 660 0092 002B     	 cmp r3,#0
 661 0094 18D1     	 bne .L20
 337:../SSC/Src/mailbox.c ****         {
 338:../SSC/Src/mailbox.c ****             bNoMbxMemoryAvailable = TRUE;
 662              	 .loc 2 338 0
 663 0096 194B     	 ldr r3,.L23+20
 664 0098 0122     	 movs r2,#1
 665 009a 1A70     	 strb r2,[r3]
 339:../SSC/Src/mailbox.c **** 
 340:../SSC/Src/mailbox.c ****             //check if at least enough memory for an mailbox error is available (other wise stop th
 341:../SSC/Src/mailbox.c ****             psWriteMbx = (TMBX MBXMEM *) APPL_AllocMailboxBuffer(10); /* a mailbox error datagram l
 666              	 .loc 2 341 0
 667 009c 0A20     	 movs r0,#10
 668 009e FFF7FEFF 	 bl malloc
 669 00a2 0346     	 mov r3,r0
 670 00a4 1A46     	 mov r2,r3
 671 00a6 144B     	 ldr r3,.L23+16
 672 00a8 1A60     	 str r2,[r3]
 342:../SSC/Src/mailbox.c ****             if(psWriteMbx == NULL)
 673              	 .loc 2 342 0
 674 00aa 134B     	 ldr r3,.L23+16
 675 00ac 1B68     	 ldr r3,[r3]
 676 00ae 002B     	 cmp r3,#0
 677 00b0 01D1     	 bne .L21
 343:../SSC/Src/mailbox.c ****             {
 344:../SSC/Src/mailbox.c ****                 result = ALSTATUSCODE_NOMEMORY;
 678              	 .loc 2 344 0
 679 00b2 0223     	 movs r3,#2
 680 00b4 FB80     	 strh r3,[r7,#6]
 681              	.L21:
 345:../SSC/Src/mailbox.c ****             }
 346:../SSC/Src/mailbox.c **** 
 347:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(psWriteMbx);
 682              	 .loc 2 347 0
 683 00b6 104B     	 ldr r3,.L23+16
 684 00b8 1B68     	 ldr r3,[r3]
 685 00ba 1846     	 mov r0,r3
 686 00bc FFF7FEFF 	 bl free
 348:../SSC/Src/mailbox.c ****             psWriteMbx = NULL;
 687              	 .loc 2 348 0
 688 00c0 0D4B     	 ldr r3,.L23+16
 689 00c2 0022     	 movs r2,#0
 690 00c4 1A60     	 str r2,[r3]
 691 00c6 0AE0     	 b .L22
 692              	.L20:
 349:../SSC/Src/mailbox.c ****         }
 350:../SSC/Src/mailbox.c ****         else
 351:../SSC/Src/mailbox.c ****         {
 352:../SSC/Src/mailbox.c ****             bNoMbxMemoryAvailable = FALSE;
 693              	 .loc 2 352 0
 694 00c8 0C4B     	 ldr r3,.L23+20
 695 00ca 0022     	 movs r2,#0
 696 00cc 1A70     	 strb r2,[r3]
 353:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(psWriteMbx);
 697              	 .loc 2 353 0
 698 00ce 0A4B     	 ldr r3,.L23+16
 699 00d0 1B68     	 ldr r3,[r3]
 700 00d2 1846     	 mov r0,r3
 701 00d4 FFF7FEFF 	 bl free
 354:../SSC/Src/mailbox.c ****             psWriteMbx = NULL;
 702              	 .loc 2 354 0
 703 00d8 074B     	 ldr r3,.L23+16
 704 00da 0022     	 movs r2,#0
 705 00dc 1A60     	 str r2,[r3]
 706              	.L22:
 355:../SSC/Src/mailbox.c ****         }
 356:../SSC/Src/mailbox.c **** 
 357:../SSC/Src/mailbox.c ****     return result;
 707              	 .loc 2 357 0
 708 00de FB88     	 ldrh r3,[r7,#6]
 709              	.L19:
 358:../SSC/Src/mailbox.c **** }
 710              	 .loc 2 358 0
 711 00e0 1846     	 mov r0,r3
 712 00e2 0837     	 adds r7,r7,#8
 713              	.LCFI41:
 714              	 .cfi_def_cfa_offset 8
 715 00e4 BD46     	 mov sp,r7
 716              	.LCFI42:
 717              	 .cfi_def_cfa_register 13
 718              	 
 719 00e6 80BD     	 pop {r7,pc}
 720              	.L24:
 721              	 .align 2
 722              	.L23:
 723 00e8 00000000 	 .word u16ReceiveMbxSize
 724 00ec 00000000 	 .word u16EscAddrReceiveMbx
 725 00f0 00000000 	 .word u16SendMbxSize
 726 00f4 00000000 	 .word u16EscAddrSendMbx
 727 00f8 00000000 	 .word psWriteMbx
 728 00fc 00000000 	 .word bNoMbxMemoryAvailable
 729              	 .cfi_endproc
 730              	.LFE178:
 732              	 .section .text.MBX_StopMailboxHandler,"ax",%progbits
 733              	 .align 2
 734              	 .global MBX_StopMailboxHandler
 735              	 .thumb
 736              	 .thumb_func
 738              	MBX_StopMailboxHandler:
 739              	.LFB179:
 359:../SSC/Src/mailbox.c **** 
 360:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 361:../SSC/Src/mailbox.c **** /**
 362:../SSC/Src/mailbox.c **** 
 363:../SSC/Src/mailbox.c ****  \brief    This function includes the state transition from
 364:../SSC/Src/mailbox.c ****  \brief    PRE-OPERATIONAL to INIT in the EtherCAT Slave corresponding to
 365:../SSC/Src/mailbox.c ****  \brief  local management service Stop Mailbox Handler
 366:../SSC/Src/mailbox.c ****  \brief  the Sync Manager channels 0 and 1 are disabled
 367:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 368:../SSC/Src/mailbox.c **** 
 369:../SSC/Src/mailbox.c **** void MBX_StopMailboxHandler(void)
 370:../SSC/Src/mailbox.c **** {
 740              	 .loc 2 370 0
 741              	 .cfi_startproc
 742              	 
 743              	 
 744 0000 80B5     	 push {r7,lr}
 745              	.LCFI43:
 746              	 .cfi_def_cfa_offset 8
 747              	 .cfi_offset 7,-8
 748              	 .cfi_offset 14,-4
 749 0002 82B0     	 sub sp,sp,#8
 750              	.LCFI44:
 751              	 .cfi_def_cfa_offset 16
 752 0004 00AF     	 add r7,sp,#0
 753              	.LCFI45:
 754              	 .cfi_def_cfa_register 7
 371:../SSC/Src/mailbox.c ****     TMBX MBXMEM * pMbx;
 372:../SSC/Src/mailbox.c **** 
 373:../SSC/Src/mailbox.c ****     /* mailbox handler is stopped */
 374:../SSC/Src/mailbox.c ****     bMbxRunning = FALSE;
 755              	 .loc 2 374 0
 756 0006 3F4B     	 ldr r3,.L33
 757 0008 0022     	 movs r2,#0
 758 000a 1A70     	 strb r2,[r3]
 375:../SSC/Src/mailbox.c ****     /* disable the receive mailbox sync manager channel */
 376:../SSC/Src/mailbox.c ****     DisableSyncManChannel(MAILBOX_WRITE);
 759              	 .loc 2 376 0
 760 000c 0020     	 movs r0,#0
 761 000e FFF7FEFF 	 bl DisableSyncManChannel
 377:../SSC/Src/mailbox.c ****     /* disable the send mailbox sync manager channel */
 378:../SSC/Src/mailbox.c ****     DisableSyncManChannel(MAILBOX_READ);
 762              	 .loc 2 378 0
 763 0012 0120     	 movs r0,#1
 764 0014 FFF7FEFF 	 bl DisableSyncManChannel
 379:../SSC/Src/mailbox.c ****     /* initialize variables again */
 380:../SSC/Src/mailbox.c **** 
 381:../SSC/Src/mailbox.c **** 
 382:../SSC/Src/mailbox.c ****     if (psRepeatMbx != NULL)
 765              	 .loc 2 382 0
 766 0018 3B4B     	 ldr r3,.L33+4
 767 001a 1B68     	 ldr r3,[r3]
 768 001c 002B     	 cmp r3,#0
 769 001e 04D0     	 beq .L26
 383:../SSC/Src/mailbox.c ****     {
 384:../SSC/Src/mailbox.c ****         APPL_FreeMailboxBuffer(psRepeatMbx);
 770              	 .loc 2 384 0
 771 0020 394B     	 ldr r3,.L33+4
 772 0022 1B68     	 ldr r3,[r3]
 773 0024 1846     	 mov r0,r3
 774 0026 FFF7FEFF 	 bl free
 775              	.L26:
 385:../SSC/Src/mailbox.c ****     }
 386:../SSC/Src/mailbox.c **** 
 387:../SSC/Src/mailbox.c ****     if (psStoreMbx != NULL && psStoreMbx != psRepeatMbx)
 776              	 .loc 2 387 0
 777 002a 384B     	 ldr r3,.L33+8
 778 002c 1B68     	 ldr r3,[r3]
 779 002e 002B     	 cmp r3,#0
 780 0030 0AD0     	 beq .L27
 781              	 .loc 2 387 0 is_stmt 0 discriminator 1
 782 0032 364B     	 ldr r3,.L33+8
 783 0034 1A68     	 ldr r2,[r3]
 784 0036 344B     	 ldr r3,.L33+4
 785 0038 1B68     	 ldr r3,[r3]
 786 003a 9A42     	 cmp r2,r3
 787 003c 04D0     	 beq .L27
 388:../SSC/Src/mailbox.c ****     {
 389:../SSC/Src/mailbox.c ****         APPL_FreeMailboxBuffer(psStoreMbx);
 788              	 .loc 2 389 0 is_stmt 1
 789 003e 334B     	 ldr r3,.L33+8
 790 0040 1B68     	 ldr r3,[r3]
 791 0042 1846     	 mov r0,r3
 792 0044 FFF7FEFF 	 bl free
 793              	.L27:
 390:../SSC/Src/mailbox.c ****     }
 391:../SSC/Src/mailbox.c **** 
 392:../SSC/Src/mailbox.c ****     if (psReadMbx != NULL && psReadMbx != psRepeatMbx && psReadMbx != psStoreMbx)
 794              	 .loc 2 392 0
 795 0048 314B     	 ldr r3,.L33+12
 796 004a 1B68     	 ldr r3,[r3]
 797 004c 002B     	 cmp r3,#0
 798 004e 10D0     	 beq .L28
 799              	 .loc 2 392 0 is_stmt 0 discriminator 1
 800 0050 2F4B     	 ldr r3,.L33+12
 801 0052 1A68     	 ldr r2,[r3]
 802 0054 2C4B     	 ldr r3,.L33+4
 803 0056 1B68     	 ldr r3,[r3]
 804 0058 9A42     	 cmp r2,r3
 805 005a 0AD0     	 beq .L28
 806              	 .loc 2 392 0 discriminator 2
 807 005c 2C4B     	 ldr r3,.L33+12
 808 005e 1A68     	 ldr r2,[r3]
 809 0060 2A4B     	 ldr r3,.L33+8
 810 0062 1B68     	 ldr r3,[r3]
 811 0064 9A42     	 cmp r2,r3
 812 0066 04D0     	 beq .L28
 393:../SSC/Src/mailbox.c ****     {
 394:../SSC/Src/mailbox.c ****         APPL_FreeMailboxBuffer(psReadMbx);
 813              	 .loc 2 394 0 is_stmt 1
 814 0068 294B     	 ldr r3,.L33+12
 815 006a 1B68     	 ldr r3,[r3]
 816 006c 1846     	 mov r0,r3
 817 006e FFF7FEFF 	 bl free
 818              	.L28:
 395:../SSC/Src/mailbox.c ****     }
 396:../SSC/Src/mailbox.c **** 
 397:../SSC/Src/mailbox.c **** 
 398:../SSC/Src/mailbox.c ****     SDOS_ClearPendingResponse();
 819              	 .loc 2 398 0
 820 0072 FFF7FEFF 	 bl SDOS_ClearPendingResponse
 399:../SSC/Src/mailbox.c **** 
 400:../SSC/Src/mailbox.c **** 
 401:../SSC/Src/mailbox.c **** 
 402:../SSC/Src/mailbox.c ****     psWriteMbx = NULL;
 821              	 .loc 2 402 0
 822 0076 274B     	 ldr r3,.L33+16
 823 0078 0022     	 movs r2,#0
 824 007a 1A60     	 str r2,[r3]
 403:../SSC/Src/mailbox.c ****     psRepeatMbx = NULL;
 825              	 .loc 2 403 0
 826 007c 224B     	 ldr r3,.L33+4
 827 007e 0022     	 movs r2,#0
 828 0080 1A60     	 str r2,[r3]
 404:../SSC/Src/mailbox.c ****     psReadMbx = NULL;
 829              	 .loc 2 404 0
 830 0082 234B     	 ldr r3,.L33+12
 831 0084 0022     	 movs r2,#0
 832 0086 1A60     	 str r2,[r3]
 405:../SSC/Src/mailbox.c ****     psStoreMbx = NULL;
 833              	 .loc 2 405 0
 834 0088 204B     	 ldr r3,.L33+8
 835 008a 0022     	 movs r2,#0
 836 008c 1A60     	 str r2,[r3]
 406:../SSC/Src/mailbox.c **** 
 407:../SSC/Src/mailbox.c ****     bMbxRepeatToggle    = FALSE;
 837              	 .loc 2 407 0
 838 008e 224B     	 ldr r3,.L33+20
 839 0090 0022     	 movs r2,#0
 840 0092 1A70     	 strb r2,[r3]
 841              	.LBB4:
 408:../SSC/Src/mailbox.c ****     /*Reset Repeat acknowledge bit of SyncManager1 (0x080F bit 2)*/
 409:../SSC/Src/mailbox.c ****     {
 410:../SSC/Src/mailbox.c ****         UINT8 sm1Activate = 0;
 842              	 .loc 2 410 0
 843 0094 0023     	 movs r3,#0
 844 0096 FB71     	 strb r3,[r7,#7]
 411:../SSC/Src/mailbox.c ****         HW_EscReadByte(sm1Activate,(ESC_SM_PDICONTROL_OFFSET + SIZEOF_SM_REGISTER));
 845              	 .loc 2 411 0
 846 0098 204B     	 ldr r3,.L33+24
 847 009a 1B78     	 ldrb r3,[r3]
 848 009c FB71     	 strb r3,[r7,#7]
 412:../SSC/Src/mailbox.c ****         sm1Activate &= ~0x02;
 849              	 .loc 2 412 0
 850 009e FB79     	 ldrb r3,[r7,#7]
 851 00a0 23F00203 	 bic r3,r3,#2
 852 00a4 FB71     	 strb r3,[r7,#7]
 413:../SSC/Src/mailbox.c ****         HW_EscWriteByte(sm1Activate,(ESC_SM_PDICONTROL_OFFSET + SIZEOF_SM_REGISTER));
 853              	 .loc 2 413 0
 854 00a6 1D4A     	 ldr r2,.L33+24
 855 00a8 FB79     	 ldrb r3,[r7,#7]
 856 00aa 1370     	 strb r3,[r2]
 857              	.LBE4:
 414:../SSC/Src/mailbox.c ****     }
 415:../SSC/Src/mailbox.c ****     bSendMbxIsFull         = FALSE;
 858              	 .loc 2 415 0
 859 00ac 1C4B     	 ldr r3,.L33+28
 860 00ae 0022     	 movs r2,#0
 861 00b0 1A70     	 strb r2,[r3]
 416:../SSC/Src/mailbox.c ****     bReceiveMbxIsLocked = FALSE;
 862              	 .loc 2 416 0
 863 00b2 1C4B     	 ldr r3,.L33+32
 864 00b4 0022     	 movs r2,#0
 865 00b6 1A70     	 strb r2,[r3]
 417:../SSC/Src/mailbox.c ****     u8MailboxSendReqStored    = 0;
 866              	 .loc 2 417 0
 867 00b8 1B4B     	 ldr r3,.L33+36
 868 00ba 0022     	 movs r2,#0
 869 00bc 1A70     	 strb r2,[r3]
 418:../SSC/Src/mailbox.c ****     u8MbxWriteCounter         = 0;
 870              	 .loc 2 418 0
 871 00be 1B4B     	 ldr r3,.L33+40
 872 00c0 0022     	 movs r2,#0
 873 00c2 1A70     	 strb r2,[r3]
 419:../SSC/Src/mailbox.c ****     u8MbxReadCounter        = 0;
 874              	 .loc 2 419 0
 875 00c4 1A4B     	 ldr r3,.L33+44
 876 00c6 0022     	 movs r2,#0
 877 00c8 1A70     	 strb r2,[r3]
 878              	.L30:
 420:../SSC/Src/mailbox.c **** 
 421:../SSC/Src/mailbox.c ****     do
 422:../SSC/Src/mailbox.c ****     {
 423:../SSC/Src/mailbox.c ****         pMbx = GetOutOfMbxQueue(&sMbxReceiveQueue);
 879              	 .loc 2 423 0
 880 00ca 1A48     	 ldr r0,.L33+48
 881 00cc FFF7FEFF 	 bl GetOutOfMbxQueue
 882 00d0 3860     	 str r0,[r7]
 424:../SSC/Src/mailbox.c ****         if (pMbx)
 883              	 .loc 2 424 0
 884 00d2 3B68     	 ldr r3,[r7]
 885 00d4 002B     	 cmp r3,#0
 886 00d6 02D0     	 beq .L29
 425:../SSC/Src/mailbox.c ****         {
 426:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(pMbx);
 887              	 .loc 2 426 0
 888 00d8 3868     	 ldr r0,[r7]
 889 00da FFF7FEFF 	 bl free
 890              	.L29:
 427:../SSC/Src/mailbox.c ****         }
 428:../SSC/Src/mailbox.c ****     } while (pMbx != NULL);
 891              	 .loc 2 428 0
 892 00de 3B68     	 ldr r3,[r7]
 893 00e0 002B     	 cmp r3,#0
 894 00e2 F2D1     	 bne .L30
 895              	.L32:
 429:../SSC/Src/mailbox.c ****     
 430:../SSC/Src/mailbox.c ****     do
 431:../SSC/Src/mailbox.c ****     {
 432:../SSC/Src/mailbox.c ****         pMbx = GetOutOfMbxQueue(&sMbxSendQueue);
 896              	 .loc 2 432 0
 897 00e4 1448     	 ldr r0,.L33+52
 898 00e6 FFF7FEFF 	 bl GetOutOfMbxQueue
 899 00ea 3860     	 str r0,[r7]
 433:../SSC/Src/mailbox.c ****         if (pMbx)
 900              	 .loc 2 433 0
 901 00ec 3B68     	 ldr r3,[r7]
 902 00ee 002B     	 cmp r3,#0
 903 00f0 02D0     	 beq .L31
 434:../SSC/Src/mailbox.c ****         {
 435:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(pMbx);
 904              	 .loc 2 435 0
 905 00f2 3868     	 ldr r0,[r7]
 906 00f4 FFF7FEFF 	 bl free
 907              	.L31:
 436:../SSC/Src/mailbox.c ****         }
 437:../SSC/Src/mailbox.c ****     } while (pMbx != NULL);
 908              	 .loc 2 437 0
 909 00f8 3B68     	 ldr r3,[r7]
 910 00fa 002B     	 cmp r3,#0
 911 00fc F2D1     	 bne .L32
 438:../SSC/Src/mailbox.c **** 
 439:../SSC/Src/mailbox.c **** }
 912              	 .loc 2 439 0
 913 00fe 0837     	 adds r7,r7,#8
 914              	.LCFI46:
 915              	 .cfi_def_cfa_offset 8
 916 0100 BD46     	 mov sp,r7
 917              	.LCFI47:
 918              	 .cfi_def_cfa_register 13
 919              	 
 920 0102 80BD     	 pop {r7,pc}
 921              	.L34:
 922              	 .align 2
 923              	.L33:
 924 0104 00000000 	 .word bMbxRunning
 925 0108 00000000 	 .word psRepeatMbx
 926 010c 00000000 	 .word psStoreMbx
 927 0110 00000000 	 .word psReadMbx
 928 0114 00000000 	 .word psWriteMbx
 929 0118 00000000 	 .word bMbxRepeatToggle
 930 011c 0F080154 	 .word 1409353743
 931 0120 00000000 	 .word bSendMbxIsFull
 932 0124 00000000 	 .word bReceiveMbxIsLocked
 933 0128 00000000 	 .word u8MailboxSendReqStored
 934 012c 00000000 	 .word u8MbxWriteCounter
 935 0130 00000000 	 .word u8MbxReadCounter
 936 0134 00000000 	 .word sMbxReceiveQueue
 937 0138 00000000 	 .word sMbxSendQueue
 938              	 .cfi_endproc
 939              	.LFE179:
 941              	 .section .text.MailboxServiceInd,"ax",%progbits
 942              	 .align 2
 943              	 .global MailboxServiceInd
 944              	 .thumb
 945              	 .thumb_func
 947              	MailboxServiceInd:
 948              	.LFB180:
 440:../SSC/Src/mailbox.c **** 
 441:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 442:../SSC/Src/mailbox.c **** /**
 443:../SSC/Src/mailbox.c ****  \param     pMbx        Pointer to the received Mailbox command from Master.
 444:../SSC/Src/mailbox.c **** 
 445:../SSC/Src/mailbox.c ****  \brief    The function checks the mailbox header for the requested service and calls the
 446:../SSC/Src/mailbox.c ****  \brief    corresponding XXXX_ServiceInd-function
 447:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 448:../SSC/Src/mailbox.c **** 
 449:../SSC/Src/mailbox.c **** UINT8 MailboxServiceInd(TMBX MBXMEM *pMbx)
 450:../SSC/Src/mailbox.c **** {
 949              	 .loc 2 450 0
 950              	 .cfi_startproc
 951              	 
 952              	 
 953 0000 80B5     	 push {r7,lr}
 954              	.LCFI48:
 955              	 .cfi_def_cfa_offset 8
 956              	 .cfi_offset 7,-8
 957              	 .cfi_offset 14,-4
 958 0002 84B0     	 sub sp,sp,#16
 959              	.LCFI49:
 960              	 .cfi_def_cfa_offset 24
 961 0004 00AF     	 add r7,sp,#0
 962              	.LCFI50:
 963              	 .cfi_def_cfa_register 7
 964 0006 7860     	 str r0,[r7,#4]
 451:../SSC/Src/mailbox.c ****     UINT8 result;
 452:../SSC/Src/mailbox.c **** 
 453:../SSC/Src/mailbox.c **** 
 454:../SSC/Src/mailbox.c ****     switch ( (pMbx->MbxHeader.Flags[MBX_OFFS_TYPE] & MBX_MASK_TYPE) >> MBX_SHIFT_TYPE )
 965              	 .loc 2 454 0
 966 0008 7B68     	 ldr r3,[r7,#4]
 967 000a 5B79     	 ldrb r3,[r3,#5]
 968 000c 03F00F03 	 and r3,r3,#15
 969 0010 032B     	 cmp r3,#3
 970 0012 05D1     	 bne .L40
 455:../SSC/Src/mailbox.c ****     {
 456:../SSC/Src/mailbox.c ****     case MBX_TYPE_COE:
 457:../SSC/Src/mailbox.c ****         /* CoE datagram received */
 458:../SSC/Src/mailbox.c ****         result = COE_ServiceInd((TCOEMBX MBXMEM *) pMbx);
 971              	 .loc 2 458 0
 972 0014 7868     	 ldr r0,[r7,#4]
 973 0016 FFF7FEFF 	 bl COE_ServiceInd
 974 001a 0346     	 mov r3,r0
 975 001c FB73     	 strb r3,[r7,#15]
 459:../SSC/Src/mailbox.c ****         break;
 976              	 .loc 2 459 0
 977 001e 02E0     	 b .L38
 978              	.L40:
 460:../SSC/Src/mailbox.c **** 
 461:../SSC/Src/mailbox.c ****     default:
 462:../SSC/Src/mailbox.c **** 
 463:../SSC/Src/mailbox.c ****         result = MBXERR_UNSUPPORTEDPROTOCOL;
 979              	 .loc 2 463 0
 980 0020 0223     	 movs r3,#2
 981 0022 FB73     	 strb r3,[r7,#15]
 464:../SSC/Src/mailbox.c ****         break;
 982              	 .loc 2 464 0
 983 0024 00BF     	 nop
 984              	.L38:
 465:../SSC/Src/mailbox.c ****     }
 466:../SSC/Src/mailbox.c **** 
 467:../SSC/Src/mailbox.c ****     return result;
 985              	 .loc 2 467 0
 986 0026 FB7B     	 ldrb r3,[r7,#15]
 468:../SSC/Src/mailbox.c **** }
 987              	 .loc 2 468 0
 988 0028 1846     	 mov r0,r3
 989 002a 1037     	 adds r7,r7,#16
 990              	.LCFI51:
 991              	 .cfi_def_cfa_offset 8
 992 002c BD46     	 mov sp,r7
 993              	.LCFI52:
 994              	 .cfi_def_cfa_register 13
 995              	 
 996 002e 80BD     	 pop {r7,pc}
 997              	 .cfi_endproc
 998              	.LFE180:
 1000              	 .section .text.MBX_MailboxWriteInd,"ax",%progbits
 1001              	 .align 2
 1002              	 .global MBX_MailboxWriteInd
 1003              	 .thumb
 1004              	 .thumb_func
 1006              	MBX_MailboxWriteInd:
 1007              	.LFB181:
 469:../SSC/Src/mailbox.c **** 
 470:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 471:../SSC/Src/mailbox.c **** /**
 472:../SSC/Src/mailbox.c ****  \param     pMbx        Pointer to the received Mailbox command from Master.
 473:../SSC/Src/mailbox.c **** 
 474:../SSC/Src/mailbox.c ****  \brief    This function is called when the Master has written the Receive-Mailbox.
 475:../SSC/Src/mailbox.c ****  \brief    It will only be called if the send mailbox is empty, that a response for the
 476:../SSC/Src/mailbox.c ****  \brief    mailbox service could be stored.
 477:../SSC/Src/mailbox.c ****  \brief    The function checks the mailbox header for the requested service and calls the
 478:../SSC/Src/mailbox.c ****  \brief    corresponding XXXX_ServiceInd-function
 479:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 480:../SSC/Src/mailbox.c **** 
 481:../SSC/Src/mailbox.c **** void MBX_MailboxWriteInd(TMBX MBXMEM *pMbx)
 482:../SSC/Src/mailbox.c **** {
 1008              	 .loc 2 482 0
 1009              	 .cfi_startproc
 1010              	 
 1011              	 
 1012 0000 80B5     	 push {r7,lr}
 1013              	.LCFI53:
 1014              	 .cfi_def_cfa_offset 8
 1015              	 .cfi_offset 7,-8
 1016              	 .cfi_offset 14,-4
 1017 0002 84B0     	 sub sp,sp,#16
 1018              	.LCFI54:
 1019              	 .cfi_def_cfa_offset 24
 1020 0004 00AF     	 add r7,sp,#0
 1021              	.LCFI55:
 1022              	 .cfi_def_cfa_register 7
 1023 0006 7860     	 str r0,[r7,#4]
 483:../SSC/Src/mailbox.c ****     UINT8 result = 0;
 1024              	 .loc 2 483 0
 1025 0008 0023     	 movs r3,#0
 1026 000a FB73     	 strb r3,[r7,#15]
 484:../SSC/Src/mailbox.c ****     UINT8 mbxCounter = pMbx->MbxHeader.Flags[MBX_OFFS_COUNTER] >> MBX_SHIFT_COUNTER;
 1027              	 .loc 2 484 0
 1028 000c 7B68     	 ldr r3,[r7,#4]
 1029 000e 5B79     	 ldrb r3,[r3,#5]
 1030 0010 1B09     	 lsrs r3,r3,#4
 1031 0012 BB73     	 strb r3,[r7,#14]
 485:../SSC/Src/mailbox.c ****     UINT16 MbxLen = SWAPWORD(pMbx->MbxHeader.Length);
 1032              	 .loc 2 485 0
 1033 0014 7B68     	 ldr r3,[r7,#4]
 1034 0016 1B88     	 ldrh r3,[r3]
 1035 0018 BB81     	 strh r3,[r7,#12]
 486:../SSC/Src/mailbox.c **** 
 487:../SSC/Src/mailbox.c ****     if(MbxLen > MAX_MBX_SIZE)
 1036              	 .loc 2 487 0
 1037 001a BB89     	 ldrh r3,[r7,#12]
 1038 001c 802B     	 cmp r3,#128
 1039 001e 14D9     	 bls .L42
 488:../SSC/Src/mailbox.c ****     {
 489:../SSC/Src/mailbox.c ****         /* Mailbox error response: size specified in mailbox header too large*/
 490:../SSC/Src/mailbox.c ****         pMbx->MbxHeader.Length     = 4;
 1040              	 .loc 2 490 0
 1041 0020 7B68     	 ldr r3,[r7,#4]
 1042 0022 0422     	 movs r2,#4
 1043 0024 1A80     	 strh r2,[r3]
 491:../SSC/Src/mailbox.c ****         pMbx->MbxHeader.Flags[MBX_OFFS_TYPE]        &= ~MBX_MASK_TYPE;
 1044              	 .loc 2 491 0
 1045 0026 7B68     	 ldr r3,[r7,#4]
 1046 0028 5B79     	 ldrb r3,[r3,#5]
 1047 002a 23F00F03 	 bic r3,r3,#15
 1048 002e DAB2     	 uxtb r2,r3
 1049 0030 7B68     	 ldr r3,[r7,#4]
 1050 0032 5A71     	 strb r2,[r3,#5]
 492:../SSC/Src/mailbox.c ****         pMbx->Data[0]                        = SWAPWORD(MBXSERVICE_MBXERRORCMD);
 1051              	 .loc 2 492 0
 1052 0034 7B68     	 ldr r3,[r7,#4]
 1053 0036 0122     	 movs r2,#1
 1054 0038 DA80     	 strh r2,[r3,#6]
 493:../SSC/Src/mailbox.c ****         pMbx->Data[1]                        = SWAPWORD(MBXERR_INVALIDSIZE);
 1055              	 .loc 2 493 0
 1056 003a 7B68     	 ldr r3,[r7,#4]
 1057 003c 0822     	 movs r2,#8
 1058 003e 1A81     	 strh r2,[r3,#8]
 494:../SSC/Src/mailbox.c ****         MBX_MailboxSendReq(pMbx, 0);
 1059              	 .loc 2 494 0
 1060 0040 7868     	 ldr r0,[r7,#4]
 1061 0042 0021     	 movs r1,#0
 1062 0044 FFF7FEFF 	 bl MBX_MailboxSendReq
 1063 0048 2FE0     	 b .L41
 1064              	.L42:
 495:../SSC/Src/mailbox.c ****     }
 496:../SSC/Src/mailbox.c ****     else
 497:../SSC/Src/mailbox.c ****     /* if the mailbox datagram counter (Bit 4-6 of Byte 5 of the mailbox header) is unequal zero,
 498:../SSC/Src/mailbox.c ****        the master supports the mailbox data link layer,
 499:../SSC/Src/mailbox.c ****         in that case a repeated mailbox write request will be detected, if the counter is unequal z
 500:../SSC/Src/mailbox.c ****         and unchanged */
 501:../SSC/Src/mailbox.c ****     if ( mbxCounter == 0 || mbxCounter != u8MbxWriteCounter )
 1065              	 .loc 2 501 0
 1066 004a BB7B     	 ldrb r3,[r7,#14]
 1067 004c 002B     	 cmp r3,#0
 1068 004e 04D0     	 beq .L44
 1069              	 .loc 2 501 0 is_stmt 0 discriminator 1
 1070 0050 174B     	 ldr r3,.L47
 1071 0052 1B78     	 ldrb r3,[r3]
 1072 0054 BA7B     	 ldrb r2,[r7,#14]
 1073 0056 9A42     	 cmp r2,r3
 1074 0058 22D0     	 beq .L45
 1075              	.L44:
 502:../SSC/Src/mailbox.c ****     {
 503:../SSC/Src/mailbox.c ****         /* new mailbox service received */
 504:../SSC/Src/mailbox.c ****         /* mbxCounter = 0: old EtherCAT master */
 505:../SSC/Src/mailbox.c ****         /* new MBX service received, store the new mailbox counter */
 506:../SSC/Src/mailbox.c ****         u8MbxWriteCounter = mbxCounter;
 1076              	 .loc 2 506 0 is_stmt 1
 1077 005a 154A     	 ldr r2,.L47
 1078 005c BB7B     	 ldrb r3,[r7,#14]
 1079 005e 1370     	 strb r3,[r2]
 507:../SSC/Src/mailbox.c **** 
 508:../SSC/Src/mailbox.c ****         {
 509:../SSC/Src/mailbox.c ****             /* check the protocol type and call the XXXX_ServiceInd-function */
 510:../SSC/Src/mailbox.c **** 
 511:../SSC/Src/mailbox.c ****             result = PutInMbxQueue(pMbx, &sMbxReceiveQueue);
 1080              	 .loc 2 511 0
 1081 0060 7868     	 ldr r0,[r7,#4]
 1082 0062 1449     	 ldr r1,.L47+4
 1083 0064 FFF7FEFF 	 bl PutInMbxQueue
 1084 0068 0346     	 mov r3,r0
 1085 006a FB73     	 strb r3,[r7,#15]
 512:../SSC/Src/mailbox.c ****         }
 513:../SSC/Src/mailbox.c **** 
 514:../SSC/Src/mailbox.c ****         if ( result != 0 )
 1086              	 .loc 2 514 0
 1087 006c FB7B     	 ldrb r3,[r7,#15]
 1088 006e 002B     	 cmp r3,#0
 1089 0070 15D0     	 beq .L46
 515:../SSC/Src/mailbox.c ****         {
 516:../SSC/Src/mailbox.c ****             /* Mailbox error response: type 0 (mailbox service protocol) */
 517:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Length     = 4;
 1090              	 .loc 2 517 0
 1091 0072 7B68     	 ldr r3,[r7,#4]
 1092 0074 0422     	 movs r2,#4
 1093 0076 1A80     	 strh r2,[r3]
 518:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Flags[MBX_OFFS_TYPE]        &= ~MBX_MASK_TYPE;
 1094              	 .loc 2 518 0
 1095 0078 7B68     	 ldr r3,[r7,#4]
 1096 007a 5B79     	 ldrb r3,[r3,#5]
 1097 007c 23F00F03 	 bic r3,r3,#15
 1098 0080 DAB2     	 uxtb r2,r3
 1099 0082 7B68     	 ldr r3,[r7,#4]
 1100 0084 5A71     	 strb r2,[r3,#5]
 519:../SSC/Src/mailbox.c ****             pMbx->Data[0]                        = SWAPWORD(MBXSERVICE_MBXERRORCMD);
 1101              	 .loc 2 519 0
 1102 0086 7B68     	 ldr r3,[r7,#4]
 1103 0088 0122     	 movs r2,#1
 1104 008a DA80     	 strh r2,[r3,#6]
 520:../SSC/Src/mailbox.c ****             pMbx->Data[1]                        = SWAPWORD(result);
 1105              	 .loc 2 520 0
 1106 008c FB7B     	 ldrb r3,[r7,#15]
 1107 008e 9AB2     	 uxth r2,r3
 1108 0090 7B68     	 ldr r3,[r7,#4]
 1109 0092 1A81     	 strh r2,[r3,#8]
 521:../SSC/Src/mailbox.c ****             MBX_MailboxSendReq(pMbx, 0);
 1110              	 .loc 2 521 0
 1111 0094 7868     	 ldr r0,[r7,#4]
 1112 0096 0021     	 movs r1,#0
 1113 0098 FFF7FEFF 	 bl MBX_MailboxSendReq
 514:../SSC/Src/mailbox.c ****         {
 1114              	 .loc 2 514 0
 1115 009c 05E0     	 b .L41
 1116              	.L46:
 1117 009e 04E0     	 b .L41
 1118              	.L45:
 522:../SSC/Src/mailbox.c ****         }
 523:../SSC/Src/mailbox.c ****     }
 524:../SSC/Src/mailbox.c ****     else
 525:../SSC/Src/mailbox.c ****     {
 526:../SSC/Src/mailbox.c ****         // the mailbox buffer has to be freed here
 527:../SSC/Src/mailbox.c ****         APPL_FreeMailboxBuffer(pMbx);
 1119              	 .loc 2 527 0
 1120 00a0 7868     	 ldr r0,[r7,#4]
 1121 00a2 FFF7FEFF 	 bl free
 528:../SSC/Src/mailbox.c ****         pMbx = NULL;
 1122              	 .loc 2 528 0
 1123 00a6 0023     	 movs r3,#0
 1124 00a8 7B60     	 str r3,[r7,#4]
 1125              	.L41:
 529:../SSC/Src/mailbox.c **** 
 530:../SSC/Src/mailbox.c ****     }
 531:../SSC/Src/mailbox.c **** }
 1126              	 .loc 2 531 0
 1127 00aa 1037     	 adds r7,r7,#16
 1128              	.LCFI56:
 1129              	 .cfi_def_cfa_offset 8
 1130 00ac BD46     	 mov sp,r7
 1131              	.LCFI57:
 1132              	 .cfi_def_cfa_register 13
 1133              	 
 1134 00ae 80BD     	 pop {r7,pc}
 1135              	.L48:
 1136              	 .align 2
 1137              	.L47:
 1138 00b0 00000000 	 .word u8MbxWriteCounter
 1139 00b4 00000000 	 .word sMbxReceiveQueue
 1140              	 .cfi_endproc
 1141              	.LFE181:
 1143              	 .section .text.MBX_MailboxReadInd,"ax",%progbits
 1144              	 .align 2
 1145              	 .global MBX_MailboxReadInd
 1146              	 .thumb
 1147              	 .thumb_func
 1149              	MBX_MailboxReadInd:
 1150              	.LFB182:
 532:../SSC/Src/mailbox.c **** 
 533:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 534:../SSC/Src/mailbox.c **** /**
 535:../SSC/Src/mailbox.c ****  \brief This function is called when the Master has read the Send-Mailbox.
 536:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 537:../SSC/Src/mailbox.c **** 
 538:../SSC/Src/mailbox.c **** void MBX_MailboxReadInd(void)
 539:../SSC/Src/mailbox.c **** {
 1151              	 .loc 2 539 0
 1152              	 .cfi_startproc
 1153              	 
 1154              	 
 1155 0000 80B5     	 push {r7,lr}
 1156              	.LCFI58:
 1157              	 .cfi_def_cfa_offset 8
 1158              	 .cfi_offset 7,-8
 1159              	 .cfi_offset 14,-4
 1160 0002 82B0     	 sub sp,sp,#8
 1161              	.LCFI59:
 1162              	 .cfi_def_cfa_offset 16
 1163 0004 00AF     	 add r7,sp,#0
 1164              	.LCFI60:
 1165              	 .cfi_def_cfa_register 7
 540:../SSC/Src/mailbox.c ****     bSendMbxIsFull = FALSE;
 1166              	 .loc 2 540 0
 1167 0006 2E4B     	 ldr r3,.L55
 1168 0008 0022     	 movs r2,#0
 1169 000a 1A70     	 strb r2,[r3]
 541:../SSC/Src/mailbox.c **** 
 542:../SSC/Src/mailbox.c ****     // HBu 02.05.06: the pointer psRepeatMbx is only free if there is no stored
 543:../SSC/Src/mailbox.c ****     //               mailbox service from the last repeat
 544:../SSC/Src/mailbox.c ****     if (psRepeatMbx && psStoreMbx == NULL)
 1170              	 .loc 2 544 0
 1171 000c 2D4B     	 ldr r3,.L55+4
 1172 000e 1B68     	 ldr r3,[r3]
 1173 0010 002B     	 cmp r3,#0
 1174 0012 11D0     	 beq .L50
 1175              	 .loc 2 544 0 is_stmt 0 discriminator 1
 1176 0014 2C4B     	 ldr r3,.L55+8
 1177 0016 1B68     	 ldr r3,[r3]
 1178 0018 002B     	 cmp r3,#0
 1179 001a 0DD1     	 bne .L50
 545:../SSC/Src/mailbox.c ****     {
 546:../SSC/Src/mailbox.c ****         /* the last sent service is not stored for repeat any longer */
 547:../SSC/Src/mailbox.c **** /*ECATCHANGE_START(V5.13) MBX3*/
 548:../SSC/Src/mailbox.c ****         if (psReadMbx != psRepeatMbx)
 1180              	 .loc 2 548 0 is_stmt 1
 1181 001c 2B4B     	 ldr r3,.L55+12
 1182 001e 1A68     	 ldr r2,[r3]
 1183 0020 284B     	 ldr r3,.L55+4
 1184 0022 1B68     	 ldr r3,[r3]
 1185 0024 9A42     	 cmp r2,r3
 1186 0026 07D0     	 beq .L50
 549:../SSC/Src/mailbox.c ****         {
 550:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(psRepeatMbx);
 1187              	 .loc 2 550 0
 1188 0028 264B     	 ldr r3,.L55+4
 1189 002a 1B68     	 ldr r3,[r3]
 1190 002c 1846     	 mov r0,r3
 1191 002e FFF7FEFF 	 bl free
 551:../SSC/Src/mailbox.c ****             psRepeatMbx = NULL;
 1192              	 .loc 2 551 0
 1193 0032 244B     	 ldr r3,.L55+4
 1194 0034 0022     	 movs r2,#0
 1195 0036 1A60     	 str r2,[r3]
 1196              	.L50:
 552:../SSC/Src/mailbox.c ****         }
 553:../SSC/Src/mailbox.c **** /*ECATCHANGE_END(V5.13) MBX3*/
 554:../SSC/Src/mailbox.c **** 
 555:../SSC/Src/mailbox.c ****     }
 556:../SSC/Src/mailbox.c **** 
 557:../SSC/Src/mailbox.c ****     /* the actual sent service has to be stored for repeat */
 558:../SSC/Src/mailbox.c ****     psRepeatMbx = psReadMbx;
 1197              	 .loc 2 558 0
 1198 0038 244B     	 ldr r3,.L55+12
 1199 003a 1B68     	 ldr r3,[r3]
 1200 003c 214A     	 ldr r2,.L55+4
 1201 003e 1360     	 str r3,[r2]
 559:../SSC/Src/mailbox.c **** 
 560:../SSC/Src/mailbox.c ****       if ( psStoreMbx )
 1202              	 .loc 2 560 0
 1203 0040 214B     	 ldr r3,.L55+8
 1204 0042 1B68     	 ldr r3,[r3]
 1205 0044 002B     	 cmp r3,#0
 1206 0046 08D0     	 beq .L51
 561:../SSC/Src/mailbox.c ****       {
 562:../SSC/Src/mailbox.c ****         /* there was a buffer stored */
 563:../SSC/Src/mailbox.c ****         MBX_CopyToSendMailbox(psStoreMbx);
 1207              	 .loc 2 563 0
 1208 0048 1F4B     	 ldr r3,.L55+8
 1209 004a 1B68     	 ldr r3,[r3]
 1210 004c 1846     	 mov r0,r3
 1211 004e FFF7FEFF 	 bl MBX_CopyToSendMailbox
 564:../SSC/Src/mailbox.c ****         /* no more buffer to be stored any more */
 565:../SSC/Src/mailbox.c ****         psStoreMbx = NULL;
 1212              	 .loc 2 565 0
 1213 0052 1D4B     	 ldr r3,.L55+8
 1214 0054 0022     	 movs r2,#0
 1215 0056 1A60     	 str r2,[r3]
 1216 0058 09E0     	 b .L52
 1217              	.L51:
 1218              	.LBB5:
 566:../SSC/Src/mailbox.c ****       }
 567:../SSC/Src/mailbox.c ****       else
 568:../SSC/Src/mailbox.c ****     {
 569:../SSC/Src/mailbox.c ****         TMBX MBXMEM* pMbx = GetOutOfMbxQueue(&sMbxSendQueue);
 1219              	 .loc 2 569 0
 1220 005a 1D48     	 ldr r0,.L55+16
 1221 005c FFF7FEFF 	 bl GetOutOfMbxQueue
 1222 0060 7860     	 str r0,[r7,#4]
 570:../SSC/Src/mailbox.c **** 
 571:../SSC/Src/mailbox.c ****         
 572:../SSC/Src/mailbox.c ****         if (pMbx)
 1223              	 .loc 2 572 0
 1224 0062 7B68     	 ldr r3,[r7,#4]
 1225 0064 002B     	 cmp r3,#0
 1226 0066 02D0     	 beq .L52
 573:../SSC/Src/mailbox.c ****         {
 574:../SSC/Src/mailbox.c ****             MBX_CopyToSendMailbox(pMbx);
 1227              	 .loc 2 574 0
 1228 0068 7868     	 ldr r0,[r7,#4]
 1229 006a FFF7FEFF 	 bl MBX_CopyToSendMailbox
 1230              	.L52:
 1231              	.LBE5:
 575:../SSC/Src/mailbox.c ****         }
 576:../SSC/Src/mailbox.c ****     }
 577:../SSC/Src/mailbox.c **** 
 578:../SSC/Src/mailbox.c ****       if ( u8MailboxSendReqStored )
 1232              	 .loc 2 578 0
 1233 006e 194B     	 ldr r3,.L55+20
 1234 0070 1B78     	 ldrb r3,[r3]
 1235 0072 002B     	 cmp r3,#0
 1236 0074 20D0     	 beq .L49
 579:../SSC/Src/mailbox.c ****     {
 580:../SSC/Src/mailbox.c ****         /* there are mailbox services stored to be sent */
 581:../SSC/Src/mailbox.c ****         if ( u8MailboxSendReqStored & COE_SERVICE )
 1237              	 .loc 2 581 0
 1238 0076 174B     	 ldr r3,.L55+20
 1239 0078 1B78     	 ldrb r3,[r3]
 1240 007a 03F00203 	 and r3,r3,#2
 1241 007e 002B     	 cmp r3,#0
 1242 0080 1AD0     	 beq .L49
 1243              	.LBB6:
 582:../SSC/Src/mailbox.c ****         {
 583:../SSC/Src/mailbox.c ****            UINT8 result = 0;
 1244              	 .loc 2 583 0
 1245 0082 0023     	 movs r3,#0
 1246 0084 FB70     	 strb r3,[r7,#3]
 584:../SSC/Src/mailbox.c ****             /* reset the flag indicating that CoE service to be sent was stored */
 585:../SSC/Src/mailbox.c ****             u8MailboxSendReqStored &= ~COE_SERVICE;
 1247              	 .loc 2 585 0
 1248 0086 134B     	 ldr r3,.L55+20
 1249 0088 1B78     	 ldrb r3,[r3]
 1250 008a 23F00203 	 bic r3,r3,#2
 1251 008e DAB2     	 uxtb r2,r3
 1252 0090 104B     	 ldr r3,.L55+20
 1253 0092 1A70     	 strb r2,[r3]
 586:../SSC/Src/mailbox.c **** 
 587:../SSC/Src/mailbox.c ****             /* call CoE function that will send the stored CoE service */
 588:../SSC/Src/mailbox.c ****             result = COE_ContinueInd(psWriteMbx);
 1254              	 .loc 2 588 0
 1255 0094 104B     	 ldr r3,.L55+24
 1256 0096 1B68     	 ldr r3,[r3]
 1257 0098 1846     	 mov r0,r3
 1258 009a FFF7FEFF 	 bl COE_ContinueInd
 1259 009e 0346     	 mov r3,r0
 1260 00a0 FB70     	 strb r3,[r7,#3]
 589:../SSC/Src/mailbox.c **** 
 590:../SSC/Src/mailbox.c ****             if (result != 0)
 1261              	 .loc 2 590 0
 1262 00a2 FB78     	 ldrb r3,[r7,#3]
 1263 00a4 002B     	 cmp r3,#0
 1264 00a6 07D0     	 beq .L54
 591:../SSC/Src/mailbox.c ****             {
 592:../SSC/Src/mailbox.c ****                 /*Set the pending CoE indication is an error occurred during the continue indicatio
 593:../SSC/Src/mailbox.c ****                 u8MailboxSendReqStored |= COE_SERVICE;
 1265              	 .loc 2 593 0
 1266 00a8 0A4B     	 ldr r3,.L55+20
 1267 00aa 1B78     	 ldrb r3,[r3]
 1268 00ac 43F00203 	 orr r3,r3,#2
 1269 00b0 DAB2     	 uxtb r2,r3
 1270 00b2 084B     	 ldr r3,.L55+20
 1271 00b4 1A70     	 strb r2,[r3]
 1272              	.LBE6:
 1273 00b6 FFE7     	 b .L49
 1274              	.L54:
 1275              	.L49:
 594:../SSC/Src/mailbox.c ****             }
 595:../SSC/Src/mailbox.c ****         }
 596:../SSC/Src/mailbox.c ****         else
 597:../SSC/Src/mailbox.c **** /*ECATCHANGE_START(V5.13) EOE1*/
 598:../SSC/Src/mailbox.c **** /*pending EoE commands are handled from the MBX_Main function*/
 599:../SSC/Src/mailbox.c **** /*ECATCHANGE_END(V5.13) EOE1*/
 600:../SSC/Src/mailbox.c **** 
 601:../SSC/Src/mailbox.c ****         {
 602:../SSC/Src/mailbox.c ****         }
 603:../SSC/Src/mailbox.c ****     }
 604:../SSC/Src/mailbox.c **** }
 1276              	 .loc 2 604 0
 1277 00b8 0837     	 adds r7,r7,#8
 1278              	.LCFI61:
 1279              	 .cfi_def_cfa_offset 8
 1280 00ba BD46     	 mov sp,r7
 1281              	.LCFI62:
 1282              	 .cfi_def_cfa_register 13
 1283              	 
 1284 00bc 80BD     	 pop {r7,pc}
 1285              	.L56:
 1286 00be 00BF     	 .align 2
 1287              	.L55:
 1288 00c0 00000000 	 .word bSendMbxIsFull
 1289 00c4 00000000 	 .word psRepeatMbx
 1290 00c8 00000000 	 .word psStoreMbx
 1291 00cc 00000000 	 .word psReadMbx
 1292 00d0 00000000 	 .word sMbxSendQueue
 1293 00d4 00000000 	 .word u8MailboxSendReqStored
 1294 00d8 00000000 	 .word psWriteMbx
 1295              	 .cfi_endproc
 1296              	.LFE182:
 1298              	 .section .text.MBX_MailboxRepeatReq,"ax",%progbits
 1299              	 .align 2
 1300              	 .global MBX_MailboxRepeatReq
 1301              	 .thumb
 1302              	 .thumb_func
 1304              	MBX_MailboxRepeatReq:
 1305              	.LFB183:
 605:../SSC/Src/mailbox.c **** 
 606:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 607:../SSC/Src/mailbox.c **** /**
 608:../SSC/Src/mailbox.c ****  \brief This function is called if the Master has requested a resending of the last
 609:../SSC/Src/mailbox.c ****  \brief sent mailbox
 610:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 611:../SSC/Src/mailbox.c **** 
 612:../SSC/Src/mailbox.c **** void MBX_MailboxRepeatReq(void)
 613:../SSC/Src/mailbox.c **** {
 1306              	 .loc 2 613 0
 1307              	 .cfi_startproc
 1308              	 
 1309              	 
 1310 0000 80B5     	 push {r7,lr}
 1311              	.LCFI63:
 1312              	 .cfi_def_cfa_offset 8
 1313              	 .cfi_offset 7,-8
 1314              	 .cfi_offset 14,-4
 1315 0002 82B0     	 sub sp,sp,#8
 1316              	.LCFI64:
 1317              	 .cfi_def_cfa_offset 16
 1318 0004 00AF     	 add r7,sp,#0
 1319              	.LCFI65:
 1320              	 .cfi_def_cfa_register 7
 614:../SSC/Src/mailbox.c ****     if (psRepeatMbx)
 1321              	 .loc 2 614 0
 1322 0006 1A4B     	 ldr r3,.L60
 1323 0008 1B68     	 ldr r3,[r3]
 1324 000a 002B     	 cmp r3,#0
 1325 000c 1DD0     	 beq .L58
 1326              	.LBB7:
 615:../SSC/Src/mailbox.c ****     {
 616:../SSC/Src/mailbox.c ****         TMBX MBXMEM *pMbx = psRepeatMbx;
 1327              	 .loc 2 616 0
 1328 000e 184B     	 ldr r3,.L60
 1329 0010 1B68     	 ldr r3,[r3]
 1330 0012 7B60     	 str r3,[r7,#4]
 617:../SSC/Src/mailbox.c ****         
 618:../SSC/Src/mailbox.c ****         /* send mailbox service stored for repeat */
 619:../SSC/Src/mailbox.c ****         /* HBu 13.10.06: if a repeat request is received (again) before the previously repeated mai
 620:../SSC/Src/mailbox.c ****            was read from the master (psStoreMbx != NULL) the next mailbox telegram to be sent is st
 621:../SSC/Src/mailbox.c ****             read mailbox so it has not to updated exchanged */
 622:../SSC/Src/mailbox.c ****         ENTER_MBX_CRITICAL;
 623:../SSC/Src/mailbox.c **** 
 624:../SSC/Src/mailbox.c ****        if (bSendMbxIsFull && psStoreMbx == NULL)
 1331              	 .loc 2 624 0
 1332 0014 174B     	 ldr r3,.L60+4
 1333 0016 1B78     	 ldrb r3,[r3]
 1334 0018 002B     	 cmp r3,#0
 1335 001a 10D0     	 beq .L59
 1336              	 .loc 2 624 0 is_stmt 0 discriminator 1
 1337 001c 164B     	 ldr r3,.L60+8
 1338 001e 1B68     	 ldr r3,[r3]
 1339 0020 002B     	 cmp r3,#0
 1340 0022 0CD1     	 bne .L59
 625:../SSC/Src/mailbox.c ****         {
 626:../SSC/Src/mailbox.c ****             /* mailbox is full, take the buffer off */
 627:../SSC/Src/mailbox.c ****             DisableSyncManChannel(MAILBOX_READ);
 1341              	 .loc 2 627 0 is_stmt 1
 1342 0024 0120     	 movs r0,#1
 1343 0026 FFF7FEFF 	 bl DisableSyncManChannel
 628:../SSC/Src/mailbox.c **** 
 629:../SSC/Src/mailbox.c ****             /* store the buffer to be sent next */
 630:../SSC/Src/mailbox.c ****             psStoreMbx = psReadMbx;
 1344              	 .loc 2 630 0
 1345 002a 144B     	 ldr r3,.L60+12
 1346 002c 1B68     	 ldr r3,[r3]
 1347 002e 124A     	 ldr r2,.L60+8
 1348 0030 1360     	 str r3,[r2]
 631:../SSC/Src/mailbox.c ****             /* enable the mailbox again */
 632:../SSC/Src/mailbox.c ****             EnableSyncManChannel(MAILBOX_READ);
 1349              	 .loc 2 632 0
 1350 0032 0120     	 movs r0,#1
 1351 0034 FFF7FEFF 	 bl EnableSyncManChannel
 633:../SSC/Src/mailbox.c **** 
 634:../SSC/Src/mailbox.c ****             /* HBu 15.02.06: flag has to be reset otherwise the mailbox service
 635:../SSC/Src/mailbox.c ****                              will not be copied by MBX_CopyToSendMailbox */
 636:../SSC/Src/mailbox.c ****             bSendMbxIsFull = FALSE;
 1352              	 .loc 2 636 0
 1353 0038 0E4B     	 ldr r3,.L60+4
 1354 003a 0022     	 movs r2,#0
 1355 003c 1A70     	 strb r2,[r3]
 1356              	.L59:
 637:../SSC/Src/mailbox.c ****         }
 638:../SSC/Src/mailbox.c **** 
 639:../SSC/Src/mailbox.c **** 
 640:../SSC/Src/mailbox.c ****         MBX_CopyToSendMailbox(pMbx);
 1357              	 .loc 2 640 0
 1358 003e 7868     	 ldr r0,[r7,#4]
 1359 0040 FFF7FEFF 	 bl MBX_CopyToSendMailbox
 641:../SSC/Src/mailbox.c ****         // HBu 17.06.06: psRepeatMbx has to be set to 0, when it was repeated, otherwise it would b
 642:../SSC/Src/mailbox.c ****         // to the empty queue (MAILBOX_QUEUE=1) or a buffer get lost, if the the next repeat reques
 643:../SSC/Src/mailbox.c ****         // the repeated buffer was read
 644:../SSC/Src/mailbox.c ****         psRepeatMbx = NULL;
 1360              	 .loc 2 644 0
 1361 0044 0A4B     	 ldr r3,.L60
 1362 0046 0022     	 movs r2,#0
 1363 0048 1A60     	 str r2,[r3]
 1364              	.L58:
 1365              	.LBE7:
 645:../SSC/Src/mailbox.c ****         LEAVE_MBX_CRITICAL;
 646:../SSC/Src/mailbox.c ****     }
 647:../SSC/Src/mailbox.c **** 
 648:../SSC/Src/mailbox.c ****     // Repeat was finished, toggle the acknowledge bit
 649:../SSC/Src/mailbox.c ****     bMbxRepeatToggle = !bMbxRepeatToggle;
 1366              	 .loc 2 649 0
 1367 004a 0D4B     	 ldr r3,.L60+16
 1368 004c 1B78     	 ldrb r3,[r3]
 1369 004e 002B     	 cmp r3,#0
 1370 0050 14BF     	 ite ne
 1371 0052 0123     	 movne r3,#1
 1372 0054 0023     	 moveq r3,#0
 1373 0056 DBB2     	 uxtb r3,r3
 1374 0058 83F00103 	 eor r3,r3,#1
 1375 005c DBB2     	 uxtb r3,r3
 1376 005e 03F00103 	 and r3,r3,#1
 1377 0062 DAB2     	 uxtb r2,r3
 1378 0064 064B     	 ldr r3,.L60+16
 1379 0066 1A70     	 strb r2,[r3]
 650:../SSC/Src/mailbox.c **** }
 1380              	 .loc 2 650 0
 1381 0068 0837     	 adds r7,r7,#8
 1382              	.LCFI66:
 1383              	 .cfi_def_cfa_offset 8
 1384 006a BD46     	 mov sp,r7
 1385              	.LCFI67:
 1386              	 .cfi_def_cfa_register 13
 1387              	 
 1388 006c 80BD     	 pop {r7,pc}
 1389              	.L61:
 1390 006e 00BF     	 .align 2
 1391              	.L60:
 1392 0070 00000000 	 .word psRepeatMbx
 1393 0074 00000000 	 .word bSendMbxIsFull
 1394 0078 00000000 	 .word psStoreMbx
 1395 007c 00000000 	 .word psReadMbx
 1396 0080 00000000 	 .word bMbxRepeatToggle
 1397              	 .cfi_endproc
 1398              	.LFE183:
 1400              	 .section .text.MBX_MailboxSendReq,"ax",%progbits
 1401              	 .align 2
 1402              	 .global MBX_MailboxSendReq
 1403              	 .thumb
 1404              	 .thumb_func
 1406              	MBX_MailboxSendReq:
 1407              	.LFB184:
 651:../SSC/Src/mailbox.c **** 
 652:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 653:../SSC/Src/mailbox.c **** /**
 654:../SSC/Src/mailbox.c ****  \param pMbx            Pointer to a Mailbox command to be sent (read by the Master)
 655:../SSC/Src/mailbox.c ****  \param flags            Bit 0-6:    mailbox protocol type:
 656:../SSC/Src/mailbox.c ****                                         0x01 - emergency service
 657:../SSC/Src/mailbox.c ****                                         0x02 - CoE service
 658:../SSC/Src/mailbox.c ****                                         0x04 - SoE service
 659:../SSC/Src/mailbox.c ****                                         0x80 - EoE service
 660:../SSC/Src/mailbox.c ****                                         0x10 - AoE service
 661:../SSC/Src/mailbox.c ****                                         0x20 - VoE service
 662:../SSC/Src/mailbox.c ****                              Bit 7:   0 - no more fragments to be sent for the requested mailbox se
 663:../SSC/Src/mailbox.c ****                                        1 - additional fragments to be sent for the mailbox service,
 664:../SSC/Src/mailbox.c ****                                             corresponding XXXX_ContinueInd-function will be called 
 665:../SSC/Src/mailbox.c ****                                             the next fragment
 666:../SSC/Src/mailbox.c **** 
 667:../SSC/Src/mailbox.c ****  \return    0: Success - mailbox command could be stored in the send mailbox
 668:../SSC/Src/mailbox.c ****             1: Failed - mailbox command could not be stored in the send mailbox, the
 669:../SSC/Src/mailbox.c ****                             XXXX_ContinueInd service will be called when the mailbox was
 670:../SSC/Src/mailbox.c ****                             read from the master to
 671:../SSC/Src/mailbox.c **** 
 672:../SSC/Src/mailbox.c ****  \brief        This function puts a new Mailbox service in the Send Mailbox
 673:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 674:../SSC/Src/mailbox.c **** 
 675:../SSC/Src/mailbox.c **** UINT8 MBX_MailboxSendReq( TMBX MBXMEM * pMbx, UINT8 flags )
 676:../SSC/Src/mailbox.c **** {
 1408              	 .loc 2 676 0
 1409              	 .cfi_startproc
 1410              	 
 1411              	 
 1412 0000 80B5     	 push {r7,lr}
 1413              	.LCFI68:
 1414              	 .cfi_def_cfa_offset 8
 1415              	 .cfi_offset 7,-8
 1416              	 .cfi_offset 14,-4
 1417 0002 84B0     	 sub sp,sp,#16
 1418              	.LCFI69:
 1419              	 .cfi_def_cfa_offset 24
 1420 0004 00AF     	 add r7,sp,#0
 1421              	.LCFI70:
 1422              	 .cfi_def_cfa_register 7
 1423 0006 7860     	 str r0,[r7,#4]
 1424 0008 0B46     	 mov r3,r1
 1425 000a FB70     	 strb r3,[r7,#3]
 677:../SSC/Src/mailbox.c ****     UINT8 result = 0;
 1426              	 .loc 2 677 0
 1427 000c 0023     	 movs r3,#0
 1428 000e FB73     	 strb r3,[r7,#15]
 678:../SSC/Src/mailbox.c **** 
 679:../SSC/Src/mailbox.c ****     /* HBu 06.02.06: in INIT-state a mailbox send request shall be refused */
 680:../SSC/Src/mailbox.c ****     if ( (nAlStatus & STATE_MASK) == STATE_INIT )
 1429              	 .loc 2 680 0
 1430 0010 2C4B     	 ldr r3,.L71
 1431 0012 1B78     	 ldrb r3,[r3]
 1432 0014 03F00F03 	 and r3,r3,#15
 1433 0018 012B     	 cmp r3,#1
 1434 001a 01D1     	 bne .L63
 681:../SSC/Src/mailbox.c ****     {
 682:../SSC/Src/mailbox.c ****         return ERROR_INVALIDSTATE;
 1435              	 .loc 2 682 0
 1436 001c F023     	 movs r3,#240
 1437 001e 4DE0     	 b .L64
 1438              	.L63:
 683:../SSC/Src/mailbox.c ****     }
 684:../SSC/Src/mailbox.c **** 
 685:../SSC/Src/mailbox.c ****     
 686:../SSC/Src/mailbox.c **** 
 687:../SSC/Src/mailbox.c ****     ENTER_MBX_CRITICAL;
 688:../SSC/Src/mailbox.c **** 
 689:../SSC/Src/mailbox.c ****     /* the counter in the mailbox header has to be incremented with every new mailbox service to be
 690:../SSC/Src/mailbox.c ****        if the mailbox data link layer is supported (software switch MAILBOX_REPEAT_SUPPORTED set)*/
 691:../SSC/Src/mailbox.c ****     pMbx->MbxHeader.Flags[MBX_OFFS_COUNTER] &= ~MBX_MASK_COUNTER;
 1439              	 .loc 2 691 0
 1440 0020 7B68     	 ldr r3,[r7,#4]
 1441 0022 5B79     	 ldrb r3,[r3,#5]
 1442 0024 03F00F03 	 and r3,r3,#15
 1443 0028 DAB2     	 uxtb r2,r3
 1444 002a 7B68     	 ldr r3,[r7,#4]
 1445 002c 5A71     	 strb r2,[r3,#5]
 692:../SSC/Src/mailbox.c ****     /* HBu 13.02.06: Repeat-Counter was incremented too much if the mailbox service could not be se
 693:../SSC/Src/mailbox.c ****     /* u8MbxCounter holds the actual counter for the mailbox header, only the values
 694:../SSC/Src/mailbox.c ****        1-7 are allowed if the mailbox data link layer is supported  */
 695:../SSC/Src/mailbox.c ****     if ( (u8MbxReadCounter & 0x07) == 0 )
 1446              	 .loc 2 695 0
 1447 002e 264B     	 ldr r3,.L71+4
 1448 0030 1B78     	 ldrb r3,[r3]
 1449 0032 03F00703 	 and r3,r3,#7
 1450 0036 002B     	 cmp r3,#0
 1451 0038 02D1     	 bne .L65
 696:../SSC/Src/mailbox.c ****     {
 697:../SSC/Src/mailbox.c ****         u8MbxReadCounter = 1;
 1452              	 .loc 2 697 0
 1453 003a 234B     	 ldr r3,.L71+4
 1454 003c 0122     	 movs r2,#1
 1455 003e 1A70     	 strb r2,[r3]
 1456              	.L65:
 698:../SSC/Src/mailbox.c ****     }
 699:../SSC/Src/mailbox.c **** 
 700:../SSC/Src/mailbox.c ****     pMbx->MbxHeader.Flags[MBX_OFFS_COUNTER] |= u8MbxReadCounter << MBX_SHIFT_COUNTER;
 1457              	 .loc 2 700 0
 1458 0040 7B68     	 ldr r3,[r7,#4]
 1459 0042 5B79     	 ldrb r3,[r3,#5]
 1460 0044 DAB2     	 uxtb r2,r3
 1461 0046 204B     	 ldr r3,.L71+4
 1462 0048 1B78     	 ldrb r3,[r3]
 1463 004a 1B01     	 lsls r3,r3,#4
 1464 004c DBB2     	 uxtb r3,r3
 1465 004e 1343     	 orrs r3,r3,r2
 1466 0050 DBB2     	 uxtb r3,r3
 1467 0052 DAB2     	 uxtb r2,r3
 1468 0054 7B68     	 ldr r3,[r7,#4]
 1469 0056 5A71     	 strb r2,[r3,#5]
 701:../SSC/Src/mailbox.c **** 
 702:../SSC/Src/mailbox.c ****     /* try to copy the mailbox command in the ESC */
 703:../SSC/Src/mailbox.c ****     if ( MBX_CopyToSendMailbox(pMbx) != 0 )
 1470              	 .loc 2 703 0
 1471 0058 7868     	 ldr r0,[r7,#4]
 1472 005a FFF7FEFF 	 bl MBX_CopyToSendMailbox
 1473 005e 0346     	 mov r3,r0
 1474 0060 002B     	 cmp r3,#0
 1475 0062 14D0     	 beq .L66
 704:../SSC/Src/mailbox.c ****     {
 705:../SSC/Src/mailbox.c ****         /* no success, send mailbox was full, set flag  */
 706:../SSC/Src/mailbox.c ****         result = PutInMbxQueue(pMbx, &sMbxSendQueue);
 1476              	 .loc 2 706 0
 1477 0064 7868     	 ldr r0,[r7,#4]
 1478 0066 1949     	 ldr r1,.L71+8
 1479 0068 FFF7FEFF 	 bl PutInMbxQueue
 1480 006c 0346     	 mov r3,r0
 1481 006e FB73     	 strb r3,[r7,#15]
 707:../SSC/Src/mailbox.c ****         if (result != 0)
 1482              	 .loc 2 707 0
 1483 0070 FB7B     	 ldrb r3,[r7,#15]
 1484 0072 002B     	 cmp r3,#0
 1485 0074 04D0     	 beq .L67
 708:../SSC/Src/mailbox.c ****         {
 709:../SSC/Src/mailbox.c ****             flags |= FRAGMENTS_FOLLOW;
 1486              	 .loc 2 709 0
 1487 0076 FB78     	 ldrb r3,[r7,#3]
 1488 0078 63F07F03 	 orn r3,r3,#127
 1489 007c FB70     	 strb r3,[r7,#3]
 1490 007e 0CE0     	 b .L69
 1491              	.L67:
 710:../SSC/Src/mailbox.c ****         }
 711:../SSC/Src/mailbox.c ****         else
 712:../SSC/Src/mailbox.c ****         {
 713:../SSC/Src/mailbox.c ****             u8MbxReadCounter++;
 1492              	 .loc 2 713 0
 1493 0080 114B     	 ldr r3,.L71+4
 1494 0082 1B78     	 ldrb r3,[r3]
 1495 0084 0133     	 adds r3,r3,#1
 1496 0086 DAB2     	 uxtb r2,r3
 1497 0088 0F4B     	 ldr r3,.L71+4
 1498 008a 1A70     	 strb r2,[r3]
 1499 008c 05E0     	 b .L69
 1500              	.L66:
 714:../SSC/Src/mailbox.c ****         }
 715:../SSC/Src/mailbox.c ****     }
 716:../SSC/Src/mailbox.c ****     /* HBu 13.02.06: Repeat-Counter was incremented too much if the mailbox service could not be se
 717:../SSC/Src/mailbox.c ****     else
 718:../SSC/Src/mailbox.c ****     {
 719:../SSC/Src/mailbox.c ****         u8MbxReadCounter++;
 1501              	 .loc 2 719 0
 1502 008e 0E4B     	 ldr r3,.L71+4
 1503 0090 1B78     	 ldrb r3,[r3]
 1504 0092 0133     	 adds r3,r3,#1
 1505 0094 DAB2     	 uxtb r2,r3
 1506 0096 0C4B     	 ldr r3,.L71+4
 1507 0098 1A70     	 strb r2,[r3]
 1508              	.L69:
 720:../SSC/Src/mailbox.c ****     }
 721:../SSC/Src/mailbox.c **** 
 722:../SSC/Src/mailbox.c ****     if ( flags & FRAGMENTS_FOLLOW )
 1509              	 .loc 2 722 0
 1510 009a FB78     	 ldrb r3,[r7,#3]
 1511 009c 5BB2     	 sxtb r3,r3
 1512 009e 002B     	 cmp r3,#0
 1513 00a0 0BDA     	 bge .L70
 723:../SSC/Src/mailbox.c ****     {
 724:../SSC/Src/mailbox.c ****         /* store the mailbox service that the corresponding XXX_ContinueInd function will
 725:../SSC/Src/mailbox.c ****            be called when the send mailbox will have been read by the master because there
 726:../SSC/Src/mailbox.c ****            are mailbox commands to be sent for this service */
 727:../SSC/Src/mailbox.c ****         u8MailboxSendReqStored |= (flags & ((UINT8) ~FRAGMENTS_FOLLOW));
 1514              	 .loc 2 727 0
 1515 00a2 FB78     	 ldrb r3,[r7,#3]
 1516 00a4 03F07F03 	 and r3,r3,#127
 1517 00a8 DAB2     	 uxtb r2,r3
 1518 00aa 094B     	 ldr r3,.L71+12
 1519 00ac 1B78     	 ldrb r3,[r3]
 1520 00ae DBB2     	 uxtb r3,r3
 1521 00b0 1343     	 orrs r3,r3,r2
 1522 00b2 DBB2     	 uxtb r3,r3
 1523 00b4 DAB2     	 uxtb r2,r3
 1524 00b6 064B     	 ldr r3,.L71+12
 1525 00b8 1A70     	 strb r2,[r3]
 1526              	.L70:
 728:../SSC/Src/mailbox.c ****     }
 729:../SSC/Src/mailbox.c **** 
 730:../SSC/Src/mailbox.c ****     LEAVE_MBX_CRITICAL;
 731:../SSC/Src/mailbox.c **** 
 732:../SSC/Src/mailbox.c ****     return result;
 1527              	 .loc 2 732 0
 1528 00ba FB7B     	 ldrb r3,[r7,#15]
 1529              	.L64:
 733:../SSC/Src/mailbox.c **** }
 1530              	 .loc 2 733 0
 1531 00bc 1846     	 mov r0,r3
 1532 00be 1037     	 adds r7,r7,#16
 1533              	.LCFI71:
 1534              	 .cfi_def_cfa_offset 8
 1535 00c0 BD46     	 mov sp,r7
 1536              	.LCFI72:
 1537              	 .cfi_def_cfa_register 13
 1538              	 
 1539 00c2 80BD     	 pop {r7,pc}
 1540              	.L72:
 1541              	 .align 2
 1542              	.L71:
 1543 00c4 00000000 	 .word nAlStatus
 1544 00c8 00000000 	 .word u8MbxReadCounter
 1545 00cc 00000000 	 .word sMbxSendQueue
 1546 00d0 00000000 	 .word u8MailboxSendReqStored
 1547              	 .cfi_endproc
 1548              	.LFE184:
 1550              	 .section .text.MBX_CheckAndCopyMailbox,"ax",%progbits
 1551              	 .align 2
 1552              	 .global MBX_CheckAndCopyMailbox
 1553              	 .thumb
 1554              	 .thumb_func
 1556              	MBX_CheckAndCopyMailbox:
 1557              	.LFB185:
 734:../SSC/Src/mailbox.c **** 
 735:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 736:../SSC/Src/mailbox.c **** /**
 737:../SSC/Src/mailbox.c ****  \brief    This function is used to check if the received mailbox command can be processed.
 738:../SSC/Src/mailbox.c **** 
 739:../SSC/Src/mailbox.c ****         Also the contents of the Receive Mailbox will be copied in the variable sMbx.
 740:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 741:../SSC/Src/mailbox.c **** 
 742:../SSC/Src/mailbox.c **** void MBX_CheckAndCopyMailbox( void )
 743:../SSC/Src/mailbox.c **** {
 1558              	 .loc 2 743 0
 1559              	 .cfi_startproc
 1560              	 
 1561              	 
 1562 0000 80B5     	 push {r7,lr}
 1563              	.LCFI73:
 1564              	 .cfi_def_cfa_offset 8
 1565              	 .cfi_offset 7,-8
 1566              	 .cfi_offset 14,-4
 1567 0002 84B0     	 sub sp,sp,#16
 1568              	.LCFI74:
 1569              	 .cfi_def_cfa_offset 24
 1570 0004 00AF     	 add r7,sp,#0
 1571              	.LCFI75:
 1572              	 .cfi_def_cfa_register 7
 744:../SSC/Src/mailbox.c ****     UINT16 mbxLen;
 745:../SSC/Src/mailbox.c **** 
 746:../SSC/Src/mailbox.c ****     /* get the size of the received mailbox command and acknowledge the event*/
 747:../SSC/Src/mailbox.c ****     HW_EscReadWord(mbxLen,u16EscAddrReceiveMbx);
 1573              	 .loc 2 747 0
 1574 0006 464B     	 ldr r3,.L81
 1575 0008 1B88     	 ldrh r3,[r3]
 1576 000a 5B08     	 lsrs r3,r3,#1
 1577 000c 9BB2     	 uxth r3,r3
 1578 000e 5B00     	 lsls r3,r3,#1
 1579 0010 03F1A843 	 add r3,r3,#1409286144
 1580 0014 03F58033 	 add r3,r3,#65536
 1581 0018 1B88     	 ldrh r3,[r3]
 1582 001a FB81     	 strh r3,[r7,#14]
 748:../SSC/Src/mailbox.c ****     
 749:../SSC/Src/mailbox.c ****     /* the size has to be swapped here, all other bytes of the mailbox service will be swapped late
 750:../SSC/Src/mailbox.c ****     mbxLen = SWAPWORD(mbxLen);
 751:../SSC/Src/mailbox.c **** 
 752:../SSC/Src/mailbox.c ****     if(bNoMbxMemoryAvailable == TRUE)
 1583              	 .loc 2 752 0
 1584 001c 414B     	 ldr r3,.L81+4
 1585 001e 1B78     	 ldrb r3,[r3]
 1586 0020 002B     	 cmp r3,#0
 1587 0022 23D0     	 beq .L74
 1588              	.LBB8:
 753:../SSC/Src/mailbox.c ****     {
 754:../SSC/Src/mailbox.c ****         /* Return a no memory error in case of any mailbox request*/
 755:../SSC/Src/mailbox.c ****         TMBX MBXMEM *pMbx = (TMBX MBXMEM *) APPL_AllocMailboxBuffer(10); /* a mailbox error datagra
 1589              	 .loc 2 755 0
 1590 0024 0A20     	 movs r0,#10
 1591 0026 FFF7FEFF 	 bl malloc
 1592 002a 0346     	 mov r3,r0
 1593 002c BB60     	 str r3,[r7,#8]
 756:../SSC/Src/mailbox.c **** 
 757:../SSC/Src/mailbox.c ****         if(pMbx != NULL)
 1594              	 .loc 2 757 0
 1595 002e BB68     	 ldr r3,[r7,#8]
 1596 0030 002B     	 cmp r3,#0
 1597 0032 1BD0     	 beq .L74
 758:../SSC/Src/mailbox.c ****         {
 759:../SSC/Src/mailbox.c ****             HMEMSET(pMbx,0x00,10);
 1598              	 .loc 2 759 0
 1599 0034 B868     	 ldr r0,[r7,#8]
 1600 0036 0021     	 movs r1,#0
 1601 0038 0A22     	 movs r2,#10
 1602 003a FFF7FEFF 	 bl memset
 760:../SSC/Src/mailbox.c **** 
 761:../SSC/Src/mailbox.c ****             /* Mailbox error response: type 0 (mailbox service protocol) */
 762:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Length     = 4;
 1603              	 .loc 2 762 0
 1604 003e BB68     	 ldr r3,[r7,#8]
 1605 0040 0422     	 movs r2,#4
 1606 0042 1A80     	 strh r2,[r3]
 763:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Flags[MBX_OFFS_TYPE]        &= ~(MBX_MASK_TYPE);
 1607              	 .loc 2 763 0
 1608 0044 BB68     	 ldr r3,[r7,#8]
 1609 0046 5B79     	 ldrb r3,[r3,#5]
 1610 0048 23F00F03 	 bic r3,r3,#15
 1611 004c DAB2     	 uxtb r2,r3
 1612 004e BB68     	 ldr r3,[r7,#8]
 1613 0050 5A71     	 strb r2,[r3,#5]
 764:../SSC/Src/mailbox.c ****             pMbx->Data[0]                        = SWAPWORD(MBXSERVICE_MBXERRORCMD);
 1614              	 .loc 2 764 0
 1615 0052 BB68     	 ldr r3,[r7,#8]
 1616 0054 0122     	 movs r2,#1
 1617 0056 DA80     	 strh r2,[r3,#6]
 765:../SSC/Src/mailbox.c ****             pMbx->Data[1]                        = SWAPWORD(MBXERR_NOMOREMEMORY);
 1618              	 .loc 2 765 0
 1619 0058 BB68     	 ldr r3,[r7,#8]
 1620 005a 0722     	 movs r2,#7
 1621 005c 1A81     	 strh r2,[r3,#8]
 766:../SSC/Src/mailbox.c ****             MBX_MailboxSendReq(pMbx, 0);
 1622              	 .loc 2 766 0
 1623 005e B868     	 ldr r0,[r7,#8]
 1624 0060 0021     	 movs r1,#0
 1625 0062 FFF7FEFF 	 bl MBX_MailboxSendReq
 767:../SSC/Src/mailbox.c **** 
 768:../SSC/Src/mailbox.c ****             APPL_FreeMailboxBuffer(pMbx);
 1626              	 .loc 2 768 0
 1627 0066 B868     	 ldr r0,[r7,#8]
 1628 0068 FFF7FEFF 	 bl free
 1629              	.L74:
 1630              	.LBE8:
 769:../SSC/Src/mailbox.c ****         }
 770:../SSC/Src/mailbox.c ****     }
 771:../SSC/Src/mailbox.c ****     /* the length of the mailbox data is in the first two bytes of the mailbox,
 772:../SSC/Src/mailbox.c ****        so the length of the mailbox header has to be added */
 773:../SSC/Src/mailbox.c ****     mbxLen += MBX_HEADER_SIZE;
 1631              	 .loc 2 773 0
 1632 006c FB89     	 ldrh r3,[r7,#14]
 1633 006e 0633     	 adds r3,r3,#6
 1634 0070 FB81     	 strh r3,[r7,#14]
 774:../SSC/Src/mailbox.c **** 
 775:../SSC/Src/mailbox.c ****     /* in this example there are only two mailbox buffers available in the firmware (one for proces
 776:../SSC/Src/mailbox.c ****        one to stored the last sent response for a possible repeat request), so a
 777:../SSC/Src/mailbox.c ****        received mailbox service can only be processed if a free buffer is available */
 778:../SSC/Src/mailbox.c ****     if ( ( bSendMbxIsFull )                /* a received mailbox service will not be processed
 1635              	 .loc 2 778 0
 1636 0072 2D4B     	 ldr r3,.L81+8
 1637 0074 1B78     	 ldrb r3,[r3]
 1638 0076 002B     	 cmp r3,#0
 1639 0078 03D1     	 bne .L75
 779:../SSC/Src/mailbox.c ****                                                     as long as the send mailbox is still full
 780:../SSC/Src/mailbox.c ****                                                     (waits to be read from the master) */
 781:../SSC/Src/mailbox.c ****         ||( u8MailboxSendReqStored )    /* a mailbox service to be sent is still stored
 1640              	 .loc 2 781 0
 1641 007a 2C4B     	 ldr r3,.L81+12
 1642 007c 1B78     	 ldrb r3,[r3]
 1643 007e 002B     	 cmp r3,#0
 1644 0080 03D0     	 beq .L76
 1645              	.L75:
 782:../SSC/Src/mailbox.c ****                                                     so the received mailbox service will not be pro
 783:../SSC/Src/mailbox.c ****                                                     until all stored mailbox services are sent */
 784:../SSC/Src/mailbox.c ****         )
 785:../SSC/Src/mailbox.c ****     {
 786:../SSC/Src/mailbox.c ****         /* set flag that the processing of the mailbox service will be checked in the
 787:../SSC/Src/mailbox.c ****             function MBX_Main (called from ECAT_Main) */
 788:../SSC/Src/mailbox.c ****         bReceiveMbxIsLocked = TRUE;
 1646              	 .loc 2 788 0
 1647 0082 2B4B     	 ldr r3,.L81+16
 1648 0084 0122     	 movs r2,#1
 1649 0086 1A70     	 strb r2,[r3]
 1650 0088 46E0     	 b .L73
 1651              	.L76:
 789:../SSC/Src/mailbox.c ****     }
 790:../SSC/Src/mailbox.c ****     else
 791:../SSC/Src/mailbox.c ****     {
 792:../SSC/Src/mailbox.c ****         /* received mailbox command can be processed, reset flag */
 793:../SSC/Src/mailbox.c ****         bReceiveMbxIsLocked = FALSE;
 1652              	 .loc 2 793 0
 1653 008a 294B     	 ldr r3,.L81+16
 1654 008c 0022     	 movs r2,#0
 1655 008e 1A70     	 strb r2,[r3]
 794:../SSC/Src/mailbox.c **** 
 795:../SSC/Src/mailbox.c ****         /* if the read mailbox size is too big for the buffer, set the copy size to the maximum buf
 796:../SSC/Src/mailbox.c ****            memory could be overwritten,
 797:../SSC/Src/mailbox.c ****            the evaluation of the mailbox size will be done in the mailbox protocols called from MBX
 798:../SSC/Src/mailbox.c **** 
 799:../SSC/Src/mailbox.c ****         if (mbxLen > u16ReceiveMbxSize)
 1656              	 .loc 2 799 0
 1657 0090 284B     	 ldr r3,.L81+20
 1658 0092 1B88     	 ldrh r3,[r3]
 1659 0094 FA89     	 ldrh r2,[r7,#14]
 1660 0096 9A42     	 cmp r2,r3
 1661 0098 02D9     	 bls .L78
 800:../SSC/Src/mailbox.c ****         {
 801:../SSC/Src/mailbox.c ****             mbxLen = u16ReceiveMbxSize;
 1662              	 .loc 2 801 0
 1663 009a 264B     	 ldr r3,.L81+20
 1664 009c 1B88     	 ldrh r3,[r3]
 1665 009e FB81     	 strh r3,[r7,#14]
 1666              	.L78:
 802:../SSC/Src/mailbox.c ****         }
 803:../SSC/Src/mailbox.c **** 
 804:../SSC/Src/mailbox.c ****         psWriteMbx = (TMBX MBXMEM *) APPL_AllocMailboxBuffer(u16ReceiveMbxSize);
 1667              	 .loc 2 804 0
 1668 00a0 244B     	 ldr r3,.L81+20
 1669 00a2 1B88     	 ldrh r3,[r3]
 1670 00a4 1846     	 mov r0,r3
 1671 00a6 FFF7FEFF 	 bl malloc
 1672 00aa 0346     	 mov r3,r0
 1673 00ac 1A46     	 mov r2,r3
 1674 00ae 224B     	 ldr r3,.L81+24
 1675 00b0 1A60     	 str r2,[r3]
 805:../SSC/Src/mailbox.c **** 
 806:../SSC/Src/mailbox.c ****         /* if there is no more memory for mailbox buffer, the mailbox should not be read */
 807:../SSC/Src/mailbox.c ****         if (psWriteMbx == NULL)
 1676              	 .loc 2 807 0
 1677 00b2 214B     	 ldr r3,.L81+24
 1678 00b4 1B68     	 ldr r3,[r3]
 1679 00b6 002B     	 cmp r3,#0
 1680 00b8 03D1     	 bne .L79
 808:../SSC/Src/mailbox.c ****         {
 809:../SSC/Src/mailbox.c ****             /* set flag that the processing of the mailbox service will be checked in the
 810:../SSC/Src/mailbox.c ****                 function MBX_Main (called from ECAT_Main) */
 811:../SSC/Src/mailbox.c ****             bReceiveMbxIsLocked = TRUE;
 1681              	 .loc 2 811 0
 1682 00ba 1D4B     	 ldr r3,.L81+16
 1683 00bc 0122     	 movs r2,#1
 1684 00be 1A70     	 strb r2,[r3]
 812:../SSC/Src/mailbox.c ****             return;
 1685              	 .loc 2 812 0
 1686 00c0 2AE0     	 b .L73
 1687              	.L79:
 813:../SSC/Src/mailbox.c ****         }
 814:../SSC/Src/mailbox.c ****         /* copy the mailbox header and data*/
 815:../SSC/Src/mailbox.c ****         HW_EscReadMbxMem((MEM_ADDR MBXMEM *) psWriteMbx,u16EscAddrReceiveMbx,mbxLen);
 1688              	 .loc 2 815 0
 1689 00c2 1D4B     	 ldr r3,.L81+24
 1690 00c4 1968     	 ldr r1,[r3]
 1691 00c6 164B     	 ldr r3,.L81
 1692 00c8 1A88     	 ldrh r2,[r3]
 1693 00ca FB89     	 ldrh r3,[r7,#14]
 1694 00cc 0846     	 mov r0,r1
 1695 00ce 1146     	 mov r1,r2
 1696 00d0 1A46     	 mov r2,r3
 1697 00d2 FFF7FEFF 	 bl HW_EscReadMbxMem
 1698              	.LBB9:
 816:../SSC/Src/mailbox.c **** 
 817:../SSC/Src/mailbox.c **** 
 818:../SSC/Src/mailbox.c ****         {
 819:../SSC/Src/mailbox.c ****         /*Read Control and Status of SyncManager 0 to check if the buffer is unlocked*/
 820:../SSC/Src/mailbox.c ****         VARVOLATILE UINT8 smstate = 0x00;
 1699              	 .loc 2 820 0
 1700 00d6 0023     	 movs r3,#0
 1701 00d8 FB71     	 strb r3,[r7,#7]
 821:../SSC/Src/mailbox.c ****         HW_EscReadByte(smstate,ESC_SYNCMAN_STATUS_OFFSET);
 1702              	 .loc 2 821 0
 1703 00da 184B     	 ldr r3,.L81+28
 1704 00dc 1B78     	 ldrb r3,[r3]
 1705 00de DBB2     	 uxtb r3,r3
 1706 00e0 FB71     	 strb r3,[r7,#7]
 822:../SSC/Src/mailbox.c **** 
 823:../SSC/Src/mailbox.c ****         if(smstate & SM_STATUS_MBX_BUFFER_FULL)
 1707              	 .loc 2 823 0
 1708 00e2 FB79     	 ldrb r3,[r7,#7]
 1709 00e4 DBB2     	 uxtb r3,r3
 1710 00e6 03F00803 	 and r3,r3,#8
 1711 00ea 002B     	 cmp r3,#0
 1712 00ec 0FD0     	 beq .L80
 824:../SSC/Src/mailbox.c ****         {
 825:../SSC/Src/mailbox.c ****             /*Unlock the mailbox SyncManger buffer*/
 826:../SSC/Src/mailbox.c ****             u8dummy = 0;
 1713              	 .loc 2 826 0
 1714 00ee 144B     	 ldr r3,.L81+32
 1715 00f0 0022     	 movs r2,#0
 1716 00f2 1A70     	 strb r2,[r3]
 827:../SSC/Src/mailbox.c ****             HW_EscReadByte(u8dummy,(u16EscAddrReceiveMbx + u16ReceiveMbxSize - 1));
 1717              	 .loc 2 827 0
 1718 00f4 0A4B     	 ldr r3,.L81
 1719 00f6 1B88     	 ldrh r3,[r3]
 1720 00f8 1A46     	 mov r2,r3
 1721 00fa 0E4B     	 ldr r3,.L81+20
 1722 00fc 1B88     	 ldrh r3,[r3]
 1723 00fe 1344     	 add r3,r3,r2
 1724 0100 1A46     	 mov r2,r3
 1725 0102 104B     	 ldr r3,.L81+36
 1726 0104 1344     	 add r3,r3,r2
 1727 0106 1B78     	 ldrb r3,[r3]
 1728 0108 DAB2     	 uxtb r2,r3
 1729 010a 0D4B     	 ldr r3,.L81+32
 1730 010c 1A70     	 strb r2,[r3]
 1731              	.L80:
 1732              	.LBE9:
 828:../SSC/Src/mailbox.c **** 
 829:../SSC/Src/mailbox.c ****         }
 830:../SSC/Src/mailbox.c **** 
 831:../SSC/Src/mailbox.c ****         }
 832:../SSC/Src/mailbox.c **** 
 833:../SSC/Src/mailbox.c ****         /* in MBX_MailboxWriteInd the mailbox protocol will be processed */
 834:../SSC/Src/mailbox.c ****         MBX_MailboxWriteInd( psWriteMbx );
 1733              	 .loc 2 834 0
 1734 010e 0A4B     	 ldr r3,.L81+24
 1735 0110 1B68     	 ldr r3,[r3]
 1736 0112 1846     	 mov r0,r3
 1737 0114 FFF7FEFF 	 bl MBX_MailboxWriteInd
 1738              	.L73:
 835:../SSC/Src/mailbox.c **** 
 836:../SSC/Src/mailbox.c ****     }
 837:../SSC/Src/mailbox.c **** }
 1739              	 .loc 2 837 0
 1740 0118 1037     	 adds r7,r7,#16
 1741              	.LCFI76:
 1742              	 .cfi_def_cfa_offset 8
 1743 011a BD46     	 mov sp,r7
 1744              	.LCFI77:
 1745              	 .cfi_def_cfa_register 13
 1746              	 
 1747 011c 80BD     	 pop {r7,pc}
 1748              	.L82:
 1749 011e 00BF     	 .align 2
 1750              	.L81:
 1751 0120 00000000 	 .word u16EscAddrReceiveMbx
 1752 0124 00000000 	 .word bNoMbxMemoryAvailable
 1753 0128 00000000 	 .word bSendMbxIsFull
 1754 012c 00000000 	 .word u8MailboxSendReqStored
 1755 0130 00000000 	 .word bReceiveMbxIsLocked
 1756 0134 00000000 	 .word u16ReceiveMbxSize
 1757 0138 00000000 	 .word psWriteMbx
 1758 013c 05080154 	 .word 1409353733
 1759 0140 00000000 	 .word u8dummy
 1760 0144 FFFF0054 	 .word 1409351679
 1761              	 .cfi_endproc
 1762              	.LFE185:
 1764              	 .section .text.MBX_CopyToSendMailbox,"ax",%progbits
 1765              	 .align 2
 1766              	 .global MBX_CopyToSendMailbox
 1767              	 .thumb
 1768              	 .thumb_func
 1770              	MBX_CopyToSendMailbox:
 1771              	.LFB186:
 838:../SSC/Src/mailbox.c **** 
 839:../SSC/Src/mailbox.c **** 
 840:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 841:../SSC/Src/mailbox.c **** /**
 842:../SSC/Src/mailbox.c ****  \param     pMbx        Pointer to the Mailbox command to be send to the master.
 843:../SSC/Src/mailbox.c **** 
 844:../SSC/Src/mailbox.c ****  \brief    This function copies data to the Send Mailbox.
 845:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 846:../SSC/Src/mailbox.c **** 
 847:../SSC/Src/mailbox.c **** UINT8 MBX_CopyToSendMailbox( TMBX MBXMEM *pMbx )
 848:../SSC/Src/mailbox.c **** {
 1772              	 .loc 2 848 0
 1773              	 .cfi_startproc
 1774              	 
 1775              	 
 1776 0000 80B5     	 push {r7,lr}
 1777              	.LCFI78:
 1778              	 .cfi_def_cfa_offset 8
 1779              	 .cfi_offset 7,-8
 1780              	 .cfi_offset 14,-4
 1781 0002 84B0     	 sub sp,sp,#16
 1782              	.LCFI79:
 1783              	 .cfi_def_cfa_offset 24
 1784 0004 00AF     	 add r7,sp,#0
 1785              	.LCFI80:
 1786              	 .cfi_def_cfa_register 7
 1787 0006 7860     	 str r0,[r7,#4]
 849:../SSC/Src/mailbox.c ****     if ( (nAlStatus & STATE_MASK) == STATE_INIT)
 1788              	 .loc 2 849 0
 1789 0008 3A4B     	 ldr r3,.L92
 1790 000a 1B78     	 ldrb r3,[r3]
 1791 000c 03F00F03 	 and r3,r3,#15
 1792 0010 012B     	 cmp r3,#1
 1793 0012 01D1     	 bne .L84
 850:../SSC/Src/mailbox.c ****     {
 851:../SSC/Src/mailbox.c ****         /* the mailbox is disabled if the slave is in the INIT state */
 852:../SSC/Src/mailbox.c ****         return( ERROR_INVALIDSTATE );
 1794              	 .loc 2 852 0
 1795 0014 F023     	 movs r3,#240
 1796 0016 69E0     	 b .L85
 1797              	.L84:
 853:../SSC/Src/mailbox.c ****     }
 854:../SSC/Src/mailbox.c **** 
 855:../SSC/Src/mailbox.c **** 
 856:../SSC/Src/mailbox.c ****     if ( !bMbxRunning )
 1798              	 .loc 2 856 0
 1799 0018 374B     	 ldr r3,.L92+4
 1800 001a 1B78     	 ldrb r3,[r3]
 1801 001c 83F00103 	 eor r3,r3,#1
 1802 0020 DBB2     	 uxtb r3,r3
 1803 0022 002B     	 cmp r3,#0
 1804 0024 01D0     	 beq .L86
 857:../SSC/Src/mailbox.c ****     {
 858:../SSC/Src/mailbox.c ****         /* the mailbox is disabled if the slave is in the INIT state */
 859:../SSC/Src/mailbox.c ****         return( ERROR_INVALIDSTATE );
 1805              	 .loc 2 859 0
 1806 0026 F023     	 movs r3,#240
 1807 0028 60E0     	 b .L85
 1808              	.L86:
 860:../SSC/Src/mailbox.c ****     }
 861:../SSC/Src/mailbox.c **** 
 862:../SSC/Src/mailbox.c ****     if ( bSendMbxIsFull )
 1809              	 .loc 2 862 0
 1810 002a 344B     	 ldr r3,.L92+8
 1811 002c 1B78     	 ldrb r3,[r3]
 1812 002e 002B     	 cmp r3,#0
 1813 0030 01D0     	 beq .L87
 863:../SSC/Src/mailbox.c ****     {
 864:../SSC/Src/mailbox.c ****         /* mailbox service cannot be sent because the send mailbox is still full */
 865:../SSC/Src/mailbox.c ****         return MBXERR_NOMOREMEMORY;
 1814              	 .loc 2 865 0
 1815 0032 0723     	 movs r3,#7
 1816 0034 5AE0     	 b .L85
 1817              	.L87:
 1818              	.LBB10:
 866:../SSC/Src/mailbox.c ****     }
 867:../SSC/Src/mailbox.c ****     else
 868:../SSC/Src/mailbox.c ****     {
 869:../SSC/Src/mailbox.c ****         /* the variable mbxSize contains the size of the mailbox data to be sent */
 870:../SSC/Src/mailbox.c ****         UINT16 mbxSize = pMbx->MbxHeader.Length;
 1819              	 .loc 2 870 0
 1820 0036 7B68     	 ldr r3,[r7,#4]
 1821 0038 1B88     	 ldrh r3,[r3]
 1822 003a BB81     	 strh r3,[r7,#12]
 1823              	.LBB11:
 871:../SSC/Src/mailbox.c **** /*ECATCHANGE_START(V5.13) MBX2*/
 872:../SSC/Src/mailbox.c ****         /*Reset the not used mailbox memory*/
 873:../SSC/Src/mailbox.c ****         {
 874:../SSC/Src/mailbox.c ****             UINT16 LastUsedAddr = u16EscAddrSendMbx + mbxSize + MBX_HEADER_SIZE;
 1824              	 .loc 2 874 0
 1825 003c 304B     	 ldr r3,.L92+12
 1826 003e 1A88     	 ldrh r2,[r3]
 1827 0040 BB89     	 ldrh r3,[r7,#12]
 1828 0042 1344     	 add r3,r3,r2
 1829 0044 9BB2     	 uxth r3,r3
 1830 0046 0633     	 adds r3,r3,#6
 1831 0048 FB81     	 strh r3,[r7,#14]
 875:../SSC/Src/mailbox.c ****             UINT16 LastAddrToReset = (u16EscAddrSendMbx + u16SendMbxSize);
 1832              	 .loc 2 875 0
 1833 004a 2D4B     	 ldr r3,.L92+12
 1834 004c 1A88     	 ldrh r2,[r3]
 1835 004e 2D4B     	 ldr r3,.L92+16
 1836 0050 1B88     	 ldrh r3,[r3]
 1837 0052 1344     	 add r3,r3,r2
 1838 0054 7B81     	 strh r3,[r7,#10]
 876:../SSC/Src/mailbox.c ****             LastAddrToReset = LastAddrToReset - 1;
 1839              	 .loc 2 876 0
 1840 0056 7B89     	 ldrh r3,[r7,#10]
 1841 0058 013B     	 subs r3,r3,#1
 1842 005a 7B81     	 strh r3,[r7,#10]
 877:../SSC/Src/mailbox.c ****             u8dummy = 0;
 1843              	 .loc 2 877 0
 1844 005c 2A4B     	 ldr r3,.L92+20
 1845 005e 0022     	 movs r2,#0
 1846 0060 1A70     	 strb r2,[r3]
 878:../SSC/Src/mailbox.c **** 
 879:../SSC/Src/mailbox.c ****             /*clear all unused bytes*/
 880:../SSC/Src/mailbox.c ****             while (LastUsedAddr < LastAddrToReset) /*reset all bytes until the second last valid ad
 1847              	 .loc 2 880 0
 1848 0062 0BE0     	 b .L88
 1849              	.L89:
 881:../SSC/Src/mailbox.c ****             {
 882:../SSC/Src/mailbox.c ****                 HW_EscWriteByte(u8dummy, LastUsedAddr);
 1850              	 .loc 2 882 0
 1851 0064 FB89     	 ldrh r3,[r7,#14]
 1852 0066 03F1A843 	 add r3,r3,#1409286144
 1853 006a 03F58033 	 add r3,r3,#65536
 1854 006e 264A     	 ldr r2,.L92+20
 1855 0070 1278     	 ldrb r2,[r2]
 1856 0072 D2B2     	 uxtb r2,r2
 1857 0074 1A70     	 strb r2,[r3]
 883:../SSC/Src/mailbox.c ****                 LastUsedAddr = LastUsedAddr + 1;
 1858              	 .loc 2 883 0
 1859 0076 FB89     	 ldrh r3,[r7,#14]
 1860 0078 0133     	 adds r3,r3,#1
 1861 007a FB81     	 strh r3,[r7,#14]
 1862              	.L88:
 880:../SSC/Src/mailbox.c ****             {
 1863              	 .loc 2 880 0
 1864 007c FA89     	 ldrh r2,[r7,#14]
 1865 007e 7B89     	 ldrh r3,[r7,#10]
 1866 0080 9A42     	 cmp r2,r3
 1867 0082 EFD3     	 bcc .L89
 1868              	.LBE11:
 884:../SSC/Src/mailbox.c ****             }
 885:../SSC/Src/mailbox.c ****         }
 886:../SSC/Src/mailbox.c **** /*ECATCHANGE_END(V5.13) MBX2*/
 887:../SSC/Src/mailbox.c **** 
 888:../SSC/Src/mailbox.c ****         HW_EscWriteMbxMem((MEM_ADDR *)pMbx, u16EscAddrSendMbx, (mbxSize + MBX_HEADER_SIZE));
 1869              	 .loc 2 888 0
 1870 0084 1E4B     	 ldr r3,.L92+12
 1871 0086 1A88     	 ldrh r2,[r3]
 1872 0088 BB89     	 ldrh r3,[r7,#12]
 1873 008a 0633     	 adds r3,r3,#6
 1874 008c 9BB2     	 uxth r3,r3
 1875 008e 7868     	 ldr r0,[r7,#4]
 1876 0090 1146     	 mov r1,r2
 1877 0092 1A46     	 mov r2,r3
 1878 0094 FFF7FEFF 	 bl HW_EscWriteMbxMem
 1879              	.LBB12:
 889:../SSC/Src/mailbox.c **** 
 890:../SSC/Src/mailbox.c **** 
 891:../SSC/Src/mailbox.c ****         {
 892:../SSC/Src/mailbox.c ****         /*Read Control and Status of SyncManager 1 to check if the buffer is still marked as empty*
 893:../SSC/Src/mailbox.c ****         VARVOLATILE UINT8 smstate = 0x00;
 1880              	 .loc 2 893 0
 1881 0098 0023     	 movs r3,#0
 1882 009a 7B72     	 strb r3,[r7,#9]
 894:../SSC/Src/mailbox.c ****         HW_EscReadByte(smstate,(ESC_SYNCMAN_STATUS_OFFSET + SIZEOF_SM_REGISTER));
 1883              	 .loc 2 894 0
 1884 009c 1B4B     	 ldr r3,.L92+24
 1885 009e 1B78     	 ldrb r3,[r3]
 1886 00a0 DBB2     	 uxtb r3,r3
 1887 00a2 7B72     	 strb r3,[r7,#9]
 895:../SSC/Src/mailbox.c **** 
 896:../SSC/Src/mailbox.c ****         if(!(smstate & SM_STATUS_MBX_BUFFER_FULL))
 1888              	 .loc 2 896 0
 1889 00a4 7B7A     	 ldrb r3,[r7,#9]
 1890 00a6 DBB2     	 uxtb r3,r3
 1891 00a8 03F00803 	 and r3,r3,#8
 1892 00ac 002B     	 cmp r3,#0
 1893 00ae 0FD1     	 bne .L90
 897:../SSC/Src/mailbox.c ****         {
 898:../SSC/Src/mailbox.c ****             
 899:../SSC/Src/mailbox.c **** 
 900:../SSC/Src/mailbox.c ****             /*Write last Byte to trigger mailbox full flag*/
 901:../SSC/Src/mailbox.c ****             u8dummy = 0;
 1894              	 .loc 2 901 0
 1895 00b0 154B     	 ldr r3,.L92+20
 1896 00b2 0022     	 movs r2,#0
 1897 00b4 1A70     	 strb r2,[r3]
 902:../SSC/Src/mailbox.c ****             HW_EscWriteByte(u8dummy, (u16EscAddrSendMbx + u16SendMbxSize - 1));
 1898              	 .loc 2 902 0
 1899 00b6 124B     	 ldr r3,.L92+12
 1900 00b8 1B88     	 ldrh r3,[r3]
 1901 00ba 1A46     	 mov r2,r3
 1902 00bc 114B     	 ldr r3,.L92+16
 1903 00be 1B88     	 ldrh r3,[r3]
 1904 00c0 1344     	 add r3,r3,r2
 1905 00c2 1A46     	 mov r2,r3
 1906 00c4 124B     	 ldr r3,.L92+28
 1907 00c6 1344     	 add r3,r3,r2
 1908 00c8 0F4A     	 ldr r2,.L92+20
 1909 00ca 1278     	 ldrb r2,[r2]
 1910 00cc D2B2     	 uxtb r2,r2
 1911 00ce 1A70     	 strb r2,[r3]
 1912              	.L90:
 1913              	.LBE12:
 903:../SSC/Src/mailbox.c ****         }
 904:../SSC/Src/mailbox.c ****         }
 905:../SSC/Src/mailbox.c **** 
 906:../SSC/Src/mailbox.c ****         /* store last send mailbox service for a possible repeat
 907:../SSC/Src/mailbox.c ****             one buffer includes the last send service (psRepeatMbx),
 908:../SSC/Src/mailbox.c ****             the other one the actual service to be sent (psReadMbx),
 909:../SSC/Src/mailbox.c ****             there is no buffer available for a mailbox receive service
 910:../SSC/Src/mailbox.c ****             until the last sent buffer was read from the master
 911:../SSC/Src/mailbox.c ****             the exception is after the INIT2PREOP transition, in that
 912:../SSC/Src/mailbox.c ****             case there is no last sent service (psReadMbx = 0) */
 913:../SSC/Src/mailbox.c ****         if ( psReadMbx )
 1914              	 .loc 2 913 0
 1915 00d0 104B     	 ldr r3,.L92+32
 1916 00d2 1B68     	 ldr r3,[r3]
 1917 00d4 002B     	 cmp r3,#0
 1918 00d6 02D0     	 beq .L91
 914:../SSC/Src/mailbox.c ****         {
 915:../SSC/Src/mailbox.c ****             psWriteMbx = NULL;
 1919              	 .loc 2 915 0
 1920 00d8 0F4B     	 ldr r3,.L92+36
 1921 00da 0022     	 movs r2,#0
 1922 00dc 1A60     	 str r2,[r3]
 1923              	.L91:
 916:../SSC/Src/mailbox.c ****         }
 917:../SSC/Src/mailbox.c ****         psReadMbx = pMbx;
 1924              	 .loc 2 917 0
 1925 00de 0D4A     	 ldr r2,.L92+32
 1926 00e0 7B68     	 ldr r3,[r7,#4]
 1927 00e2 1360     	 str r3,[r2]
 918:../SSC/Src/mailbox.c **** 
 919:../SSC/Src/mailbox.c ****         /* set flag that send mailbox is full now */
 920:../SSC/Src/mailbox.c ****         bSendMbxIsFull = TRUE;
 1928              	 .loc 2 920 0
 1929 00e4 054B     	 ldr r3,.L92+8
 1930 00e6 0122     	 movs r2,#1
 1931 00e8 1A70     	 strb r2,[r3]
 921:../SSC/Src/mailbox.c **** 
 922:../SSC/Src/mailbox.c **** 
 923:../SSC/Src/mailbox.c ****         return 0;
 1932              	 .loc 2 923 0
 1933 00ea 0023     	 movs r3,#0
 1934              	.L85:
 1935              	.LBE10:
 924:../SSC/Src/mailbox.c ****     }
 925:../SSC/Src/mailbox.c **** }
 1936              	 .loc 2 925 0
 1937 00ec 1846     	 mov r0,r3
 1938 00ee 1037     	 adds r7,r7,#16
 1939              	.LCFI81:
 1940              	 .cfi_def_cfa_offset 8
 1941 00f0 BD46     	 mov sp,r7
 1942              	.LCFI82:
 1943              	 .cfi_def_cfa_register 13
 1944              	 
 1945 00f2 80BD     	 pop {r7,pc}
 1946              	.L93:
 1947              	 .align 2
 1948              	.L92:
 1949 00f4 00000000 	 .word nAlStatus
 1950 00f8 00000000 	 .word bMbxRunning
 1951 00fc 00000000 	 .word bSendMbxIsFull
 1952 0100 00000000 	 .word u16EscAddrSendMbx
 1953 0104 00000000 	 .word u16SendMbxSize
 1954 0108 00000000 	 .word u8dummy
 1955 010c 0D080154 	 .word 1409353741
 1956 0110 FFFF0054 	 .word 1409351679
 1957 0114 00000000 	 .word psReadMbx
 1958 0118 00000000 	 .word psWriteMbx
 1959              	 .cfi_endproc
 1960              	.LFE186:
 1962              	 .section .text.MBX_Main,"ax",%progbits
 1963              	 .align 2
 1964              	 .global MBX_Main
 1965              	 .thumb
 1966              	 .thumb_func
 1968              	MBX_Main:
 1969              	.LFB187:
 926:../SSC/Src/mailbox.c **** 
 927:../SSC/Src/mailbox.c **** /////////////////////////////////////////////////////////////////////////////////////////
 928:../SSC/Src/mailbox.c **** /**
 929:../SSC/Src/mailbox.c ****  \brief    This function is called cyclically to check if a received Mailbox service was
 930:../SSC/Src/mailbox.c ****              stored.
 931:../SSC/Src/mailbox.c **** *////////////////////////////////////////////////////////////////////////////////////////
 932:../SSC/Src/mailbox.c **** 
 933:../SSC/Src/mailbox.c **** void MBX_Main(void)
 934:../SSC/Src/mailbox.c **** {
 1970              	 .loc 2 934 0
 1971              	 .cfi_startproc
 1972              	 
 1973              	 
 1974 0000 80B5     	 push {r7,lr}
 1975              	.LCFI83:
 1976              	 .cfi_def_cfa_offset 8
 1977              	 .cfi_offset 7,-8
 1978              	 .cfi_offset 14,-4
 1979 0002 82B0     	 sub sp,sp,#8
 1980              	.LCFI84:
 1981              	 .cfi_def_cfa_offset 16
 1982 0004 00AF     	 add r7,sp,#0
 1983              	.LCFI85:
 1984              	 .cfi_def_cfa_register 7
 935:../SSC/Src/mailbox.c ****     TMBX MBXMEM *pMbx = NULL;
 1985              	 .loc 2 935 0
 1986 0006 0023     	 movs r3,#0
 1987 0008 3B60     	 str r3,[r7]
 1988              	.L97:
 1989              	.LBB13:
 936:../SSC/Src/mailbox.c **** 
 937:../SSC/Src/mailbox.c ****     do
 938:../SSC/Src/mailbox.c ****     {
 939:../SSC/Src/mailbox.c ****         UINT8 result = 0;
 1990              	 .loc 2 939 0
 1991 000a 0023     	 movs r3,#0
 1992 000c FB71     	 strb r3,[r7,#7]
 940:../SSC/Src/mailbox.c **** 
 941:../SSC/Src/mailbox.c ****         pMbx = GetOutOfMbxQueue(&sMbxReceiveQueue);
 1993              	 .loc 2 941 0
 1994 000e 1848     	 ldr r0,.L99
 1995 0010 FFF7FEFF 	 bl GetOutOfMbxQueue
 1996 0014 3860     	 str r0,[r7]
 942:../SSC/Src/mailbox.c ****         if ( pMbx )
 1997              	 .loc 2 942 0
 1998 0016 3B68     	 ldr r3,[r7]
 1999 0018 002B     	 cmp r3,#0
 2000 001a 04D0     	 beq .L95
 943:../SSC/Src/mailbox.c ****         {
 944:../SSC/Src/mailbox.c ****             result = MailboxServiceInd(pMbx);
 2001              	 .loc 2 944 0
 2002 001c 3868     	 ldr r0,[r7]
 2003 001e FFF7FEFF 	 bl MailboxServiceInd
 2004 0022 0346     	 mov r3,r0
 2005 0024 FB71     	 strb r3,[r7,#7]
 2006              	.L95:
 945:../SSC/Src/mailbox.c ****         }
 946:../SSC/Src/mailbox.c **** 
 947:../SSC/Src/mailbox.c ****         if ( result != 0 )
 2007              	 .loc 2 947 0
 2008 0026 FB79     	 ldrb r3,[r7,#7]
 2009 0028 002B     	 cmp r3,#0
 2010 002a 14D0     	 beq .L96
 948:../SSC/Src/mailbox.c ****         {
 949:../SSC/Src/mailbox.c ****             /* Mailbox error response: type 0 (mailbox service protocol) */
 950:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Length     = 4;
 2011              	 .loc 2 950 0
 2012 002c 3B68     	 ldr r3,[r7]
 2013 002e 0422     	 movs r2,#4
 2014 0030 1A80     	 strh r2,[r3]
 951:../SSC/Src/mailbox.c ****             pMbx->MbxHeader.Flags[MBX_OFFS_TYPE]        &= ~(MBX_MASK_TYPE);
 2015              	 .loc 2 951 0
 2016 0032 3B68     	 ldr r3,[r7]
 2017 0034 5B79     	 ldrb r3,[r3,#5]
 2018 0036 23F00F03 	 bic r3,r3,#15
 2019 003a DAB2     	 uxtb r2,r3
 2020 003c 3B68     	 ldr r3,[r7]
 2021 003e 5A71     	 strb r2,[r3,#5]
 952:../SSC/Src/mailbox.c ****             pMbx->Data[0]                        = SWAPWORD(MBXSERVICE_MBXERRORCMD);
 2022              	 .loc 2 952 0
 2023 0040 3B68     	 ldr r3,[r7]
 2024 0042 0122     	 movs r2,#1
 2025 0044 DA80     	 strh r2,[r3,#6]
 953:../SSC/Src/mailbox.c ****             pMbx->Data[1]                        = SWAPWORD(result);
 2026              	 .loc 2 953 0
 2027 0046 FB79     	 ldrb r3,[r7,#7]
 2028 0048 9AB2     	 uxth r2,r3
 2029 004a 3B68     	 ldr r3,[r7]
 2030 004c 1A81     	 strh r2,[r3,#8]
 954:../SSC/Src/mailbox.c ****             MBX_MailboxSendReq(pMbx, 0);
 2031              	 .loc 2 954 0
 2032 004e 3868     	 ldr r0,[r7]
 2033 0050 0021     	 movs r1,#0
 2034 0052 FFF7FEFF 	 bl MBX_MailboxSendReq
 2035              	.L96:
 2036              	.LBE13:
 955:../SSC/Src/mailbox.c ****         }
 956:../SSC/Src/mailbox.c ****     }
 957:../SSC/Src/mailbox.c ****     while ( pMbx != NULL );
 2037              	 .loc 2 957 0
 2038 0056 3B68     	 ldr r3,[r7]
 2039 0058 002B     	 cmp r3,#0
 2040 005a D6D1     	 bne .L97
 958:../SSC/Src/mailbox.c **** 
 959:../SSC/Src/mailbox.c **** 
 960:../SSC/Src/mailbox.c ****     if (bReceiveMbxIsLocked)
 2041              	 .loc 2 960 0
 2042 005c 054B     	 ldr r3,.L99+4
 2043 005e 1B78     	 ldrb r3,[r3]
 2044 0060 002B     	 cmp r3,#0
 2045 0062 01D0     	 beq .L98
 961:../SSC/Src/mailbox.c ****     {
 962:../SSC/Src/mailbox.c ****         /* the work on the receive mailbox is locked, check if it can be unlocked (if all
 963:../SSC/Src/mailbox.c ****            mailbox commands has been sent */
 964:../SSC/Src/mailbox.c ****         MBX_CheckAndCopyMailbox();
 2046              	 .loc 2 964 0
 2047 0064 FFF7FEFF 	 bl MBX_CheckAndCopyMailbox
 2048              	.L98:
 965:../SSC/Src/mailbox.c ****     }
 966:../SSC/Src/mailbox.c **** 
 967:../SSC/Src/mailbox.c ****     /*ECATCHANGE_START(V5.13) EOE1*/
 968:../SSC/Src/mailbox.c ****     /*Try to send pending Mailbox data,
 969:../SSC/Src/mailbox.c ****        could be to pending previously due to local (memory) limitations which are no available*/
 970:../SSC/Src/mailbox.c ****     if (u8MailboxSendReqStored)
 971:../SSC/Src/mailbox.c ****     {
 972:../SSC/Src/mailbox.c ****         /* there are mailbox services stored to be sent */
 973:../SSC/Src/mailbox.c ****     }
 974:../SSC/Src/mailbox.c **** /*ECATCHANGE_END(V5.13) EOE1*/
 975:../SSC/Src/mailbox.c **** }
 2049              	 .loc 2 975 0
 2050 0068 0837     	 adds r7,r7,#8
 2051              	.LCFI86:
 2052              	 .cfi_def_cfa_offset 8
 2053 006a BD46     	 mov sp,r7
 2054              	.LCFI87:
 2055              	 .cfi_def_cfa_register 13
 2056              	 
 2057 006c 80BD     	 pop {r7,pc}
 2058              	.L100:
 2059 006e 00BF     	 .align 2
 2060              	.L99:
 2061 0070 00000000 	 .word sMbxReceiveQueue
 2062 0074 00000000 	 .word bReceiveMbxIsLocked
 2063              	 .cfi_endproc
 2064              	.LFE187:
 2066              	 .text
 2067              	.Letext0:
 2068              	 .file 3 "d:\\infineon\\tools\\dave ide\\4.5.0.202105191637\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 2069              	 .file 4 "d:\\infineon\\tools\\dave ide\\4.5.0.202105191637\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 2070              	 .file 5 "D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Libraries/CMSIS/Infineon/XMC4300_series/Include/XMC4300.h"
 2071              	 .file 6 "../SSC/Src/esc.h"
 2072              	 .file 7 "../SSC/Src/mailbox.h"
 2073              	 .file 8 "../SSC/Src/ecatcoe.h"
 2074              	 .file 9 "D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Libraries/CMSIS/Include/cmsis_gcc.h"
 2075              	 .file 10 "D:/Infineon/Tools/DAVE IDE/4.5.0.202105191637/eclipse/workspace/LED_test/Libraries/CMSIS/Include/core_cm4.h"
 2076              	 .file 11 "../SSC/Src/ecatslv.h"
DEFINED SYMBOLS
                            *ABS*:00000000 mailbox.c
    {standard input}:20     .text.HW_EscRead:00000000 $t
    {standard input}:24     .text.HW_EscRead:00000000 HW_EscRead
    {standard input}:68     .text.HW_EscReadMbxMem:00000000 $t
    {standard input}:72     .text.HW_EscReadMbxMem:00000000 HW_EscReadMbxMem
    {standard input}:114    .text.HW_EscWrite:00000000 $t
    {standard input}:118    .text.HW_EscWrite:00000000 HW_EscWrite
    {standard input}:161    .text.HW_EscWriteMbxMem:00000000 $t
    {standard input}:165    .text.HW_EscWriteMbxMem:00000000 HW_EscWriteMbxMem
                            *COM*:00000001 bReceiveMbxIsLocked
                            *COM*:00000001 bSendMbxIsFull
                            *COM*:00000001 bMbxRunning
                            *COM*:00000001 bMbxRepeatToggle
                            *COM*:00000002 u16SendMbxSize
                            *COM*:00000002 u16ReceiveMbxSize
                            *COM*:00000002 u16EscAddrReceiveMbx
                            *COM*:00000002 u16EscAddrSendMbx
                            *COM*:00000001 u8MbxWriteCounter
                            *COM*:00000001 u8MbxReadCounter
                            *COM*:00000001 u8MailboxSendReqStored
                            *COM*:00000004 psWriteMbx
                            *COM*:00000004 psReadMbx
                            *COM*:00000004 psRepeatMbx
                            *COM*:00000004 psStoreMbx
                            *COM*:00000034 sMbxSendQueue
                            *COM*:00000034 sMbxReceiveQueue
                            *COM*:00000001 bNoMbxMemoryAvailable
    {standard input}:225    .text.PutInMbxQueue:00000000 $t
    {standard input}:230    .text.PutInMbxQueue:00000000 PutInMbxQueue
    {standard input}:308    .text.GetOutOfMbxQueue:00000000 $t
    {standard input}:313    .text.GetOutOfMbxQueue:00000000 GetOutOfMbxQueue
    {standard input}:397    .text.MBX_Init:00000000 $t
    {standard input}:402    .text.MBX_Init:00000000 MBX_Init
    {standard input}:536    .text.MBX_Init:000000ac $d
    {standard input}:558    .text.MBX_StartMailboxHandler:00000000 $t
    {standard input}:563    .text.MBX_StartMailboxHandler:00000000 MBX_StartMailboxHandler
    {standard input}:723    .text.MBX_StartMailboxHandler:000000e8 $d
    {standard input}:733    .text.MBX_StopMailboxHandler:00000000 $t
    {standard input}:738    .text.MBX_StopMailboxHandler:00000000 MBX_StopMailboxHandler
    {standard input}:924    .text.MBX_StopMailboxHandler:00000104 $d
    {standard input}:942    .text.MailboxServiceInd:00000000 $t
    {standard input}:947    .text.MailboxServiceInd:00000000 MailboxServiceInd
    {standard input}:1001   .text.MBX_MailboxWriteInd:00000000 $t
    {standard input}:1006   .text.MBX_MailboxWriteInd:00000000 MBX_MailboxWriteInd
    {standard input}:1406   .text.MBX_MailboxSendReq:00000000 MBX_MailboxSendReq
    {standard input}:1138   .text.MBX_MailboxWriteInd:000000b0 $d
    {standard input}:1144   .text.MBX_MailboxReadInd:00000000 $t
    {standard input}:1149   .text.MBX_MailboxReadInd:00000000 MBX_MailboxReadInd
    {standard input}:1770   .text.MBX_CopyToSendMailbox:00000000 MBX_CopyToSendMailbox
    {standard input}:1288   .text.MBX_MailboxReadInd:000000c0 $d
    {standard input}:1299   .text.MBX_MailboxRepeatReq:00000000 $t
    {standard input}:1304   .text.MBX_MailboxRepeatReq:00000000 MBX_MailboxRepeatReq
    {standard input}:1392   .text.MBX_MailboxRepeatReq:00000070 $d
    {standard input}:1401   .text.MBX_MailboxSendReq:00000000 $t
    {standard input}:1543   .text.MBX_MailboxSendReq:000000c4 $d
    {standard input}:1551   .text.MBX_CheckAndCopyMailbox:00000000 $t
    {standard input}:1556   .text.MBX_CheckAndCopyMailbox:00000000 MBX_CheckAndCopyMailbox
    {standard input}:1751   .text.MBX_CheckAndCopyMailbox:00000120 $d
    {standard input}:1765   .text.MBX_CopyToSendMailbox:00000000 $t
    {standard input}:1949   .text.MBX_CopyToSendMailbox:000000f4 $d
    {standard input}:1963   .text.MBX_Main:00000000 $t
    {standard input}:1968   .text.MBX_Main:00000000 MBX_Main
    {standard input}:2061   .text.MBX_Main:00000070 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
memcpy
GetSyncMan
EnableSyncManChannel
malloc
free
DisableSyncManChannel
SDOS_ClearPendingResponse
COE_ServiceInd
COE_ContinueInd
nAlStatus
memset
u8dummy
